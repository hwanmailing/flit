<!DOCTYPE html><html lang="ja"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>üéÆ „ÉÅ„Çß„Çπ - flit.games</title><meta name="description" content="„Éó„É¨„Ç§„É§„Éº„ÅåÂÆáÂÆôËàπ„ÇíÊìç‰Ωú„Åó„Å¶Êïµ„ÅÆ„Ç®„Ç§„É™„Ç¢„É≥„ÇíÂÄí„Åô„ÇØ„É©„Ç∑„ÉÉ„ÇØ„Å™„Ç¢„Éº„Ç±„Éº„Éâ„Ç∑„É•„Éº„ÉÜ„Ç£„É≥„Ç∞„Ç≤„Éº„É†„Åß„Åô„ÄÇ"><meta name="keywords" content="Board, ÌîåÎûòÏãúÍ≤åÏûÑ, üéÆ „ÉÅ„Çß„Çπ"><link rel="icon" type="image/jpeg" href="https://www.flit.games/icon.webp"><meta property="og:title" content="üéÆ „ÉÅ„Çß„Çπ - flit.games"><meta property="og:description" content="„Éó„É¨„Ç§„É§„Éº„ÅåÂÆáÂÆôËàπ„ÇíÊìç‰Ωú„Åó„Å¶Êïµ„ÅÆ„Ç®„Ç§„É™„Ç¢„É≥„ÇíÂÄí„Åô„ÇØ„É©„Ç∑„ÉÉ„ÇØ„Å™„Ç¢„Éº„Ç±„Éº„Éâ„Ç∑„É•„Éº„ÉÜ„Ç£„É≥„Ç∞„Ç≤„Éº„É†„Åß„Åô„ÄÇ"><meta property="og:image" content="thumbnail.jpg"><meta property="og:type" content="website"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="üéÆ „ÉÅ„Çß„Çπ - flit.games"><meta name="twitter:description" content="„Éó„É¨„Ç§„É§„Éº„ÅåÂÆáÂÆôËàπ„ÇíÊìç‰Ωú„Åó„Å¶Êïµ„ÅÆ„Ç®„Ç§„É™„Ç¢„É≥„ÇíÂÄí„Åô„ÇØ„É©„Ç∑„ÉÉ„ÇØ„Å™„Ç¢„Éº„Ç±„Éº„Éâ„Ç∑„É•„Éº„ÉÜ„Ç£„É≥„Ç∞„Ç≤„Éº„É†„Åß„Åô„ÄÇ"><meta name="twitter:image" content="thumbnail.jpg"><style>*{margin:0;padding:0;box-sizing:border-box;scrollbar-color:#a64a1f #f7bd36}::-webkit-scrollbar{width:12px}::-webkit-scrollbar-track{background:#f7bd36}::-webkit-scrollbar-thumb{background:#a64a1f;border-radius:6px}::-webkit-scrollbar-thumb:hover{background:#a64a1f}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue","Noto Sans KR","Noto Sans JP","Noto Sans SC",Arial,sans-serif;background:#f7bd36;min-height:100vh;display:flex;flex-direction:column}.top-section{display:flex;height:calc(100vh - 60px);gap:20px;padding:20px;flex:none}.playerContainer{flex:2}.gameinfoContainer{flex:1;min-width:0;display:flex;flex-direction:column;gap:20px}.bottom-section{overflow-y:auto;display:flex;gap:20px;padding:0 20px 20px;flex:1}.commentsContainer{flex:2;min-width:0;display:flex;flex-direction:column}.recommendationContainer{flex:1;min-width:0;display:flex;flex-direction:column}.visually-hidden{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.hidden{display:none!important}.playerContainer{background:#fff;border-radius:15px;padding:0;box-shadow:0 10px 30px rgba(0,0,0,.2);position:relative;flex:2;display:flex;flex-direction:row;min-height:0;overflow:hidden}.player{position:relative;width:100%;flex:1;background:#000;border-radius:0;overflow:hidden;display:flex;align-items:center;justify-content:center;min-height:100px}.player-with-controls{display:flex;flex:1;position:relative}.player iframe{border:none;display:none;background-color:#fff;width:100%;height:100%;min-width:100px;min-height:100px}.player iframe.active{display:block}.thumbnail{position:absolute;top:0;left:0;width:100%;height:100%;background:#000;display:flex;align-items:center;justify-content:center;flex-direction:column;cursor:pointer;transition:opacity .3s}.thumbnail.hidden{display:none}.thumbnail img{width:100%;height:100%;object-fit:cover}.playButton{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:80px;height:80px;background:rgba(255,255,255,.9);border:none;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:30px;color:#000;transition:.3s;box-shadow:0 5px 15px rgba(0,0,0,.3)}.playButton:hover{background:#fff;transform:translate(-50%,-50%) scale(1.1)}.playButton::before{content:'‚ñ∂';margin-left:5px}.controls{display:flex;flex-direction:column;align-items:center;justify-content:flex-start;gap:5px;padding:8px;background:#000000ff;border-radius:0 15px 15px 0;flex-shrink:0;width:40px}.controls-top{display:flex;flex-direction:column;gap:5px}.controls-bottom{display:flex;flex-direction:column;gap:5px;margin-top:auto}.control-button{width:26px;height:26px;background:rgba(255,255,255,.2);color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:12px;transition:.2s;display:flex;align-items:center;justify-content:center;position:relative}.control-button:hover{background:rgba(255,255,255,.3)}.control-button.narrow::before{content:'';width:8px;height:10px;border:2px solid #fff;border-radius:2px;background:0 0}.control-button.wide::before{content:'';width:14px;height:8px;border:2px solid #fff;border-radius:2px;background:0 0}.control-button.fullscreen::before{content:'';width:12px;height:12px;border:2px dashed #fff;border-radius:2px;background:0 0}.control-button.pause::before{content:'‚è∏';font-size:14px;line-height:1}.control-button.resume::before{content:'‚ñ∂';font-size:12px;line-height:1;margin-left:2px}.control-button.stop::before{content:'‚èπ';font-size:12px;line-height:1}.control-button:disabled{background:#ccc;cursor:not-allowed}@media (max-width:900px){.control-button.narrow,.control-button.wide{display:none!important}body{overflow-y:auto;padding-bottom:60px}.top-section{height:auto;flex-direction:column;padding:10px;gap:20px}.bottom-section{flex-direction:column;padding:10px;gap:20px}.playerContainer{flex-direction:column;height:auto;min-height:300px;flex:none}.player{height:50vh;min-height:300px;max-height:500px}.playButton{width:60px;height:60px;font-size:24px}.controls{flex-direction:row;justify-content:space-between;width:100%;padding:10px;border-radius:0 0 15px 15px;position:relative;right:auto;top:auto;bottom:auto;height:60px;flex-shrink:0}.controls-top{flex-direction:row;gap:0;margin-top:0;order:1}.controls-bottom{flex-direction:row;gap:10px;margin-top:0;order:2}}</style><script src="https://www.flit.games/info_.js"></script><script src="comments_.js"></script></head><body><div class="page-toolbar"><style>.top-toolbar{background:#f7bd36;grid-area:topbar;position:sticky;top:0;z-index:1000}.top-toolbar-container{display:grid;grid-template-columns:auto 1fr auto;align-items:center;padding:0;height:60px;gap:20px}.logo{flex-shrink:0;padding-left:20px;font-weight:700}.logo a{color:#fff;text-decoration:none;font-size:1.1rem;font-weight:700;text-shadow:0 0 5px #000;transition:opacity .3s;display:flex;align-items:center;position:relative}.logo a:hover{opacity:.9}.logo img{height:48px;width:auto;object-fit:contain}.logo a span{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);pointer-events:none}.top-toolbar-right{display:flex;align-items:center;justify-content:flex-end;gap:20px;padding-right:20px}.search-container{display:flex;justify-content:center;align-items:center;width:100%;position:relative}.search-wrapper{position:relative;width:100%;max-width:500px}.search-icon{position:absolute;left:15px;top:50%;transform:translateY(-50%);width:20px;height:20px;pointer-events:none;transition:stroke .3s;stroke:#a64a1f}.search-box{width:100%;padding:10px 20px 10px 50px;border:1px solid #a64a1f!important;border-radius:25px;background:#ffffff05!important;color:#000!important;font-size:1rem;outline:0;transition:.3s}.search-box::placeholder{color:#00000088}.search-box:focus{border-color:#a64a1f!important;box-shadow:0 0 0 3px rgba(255,255,255,.2);background:#ffffff44!important;color:#000!important}.search-wrapper:focus-within .search-icon{stroke:#a64a1f}.search-icon-button{display:none;width:40px;height:40px;border-radius:50%;background:#ffffff44!important;color:#a64a1f;border:1px solid #a64a1f!important;cursor:pointer;align-items:center;justify-content:center;transition:.3s;flex-shrink:0;position:relative;z-index:2001}.search-icon-button:hover{background:#ffffff44!important;transform:scale(1.1)}.search-icon-button svg{width:20px;height:20px;stroke:#a64a1f;stroke-width:2}.search-modal{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:#f7bd36;z-index:2000;flex-direction:column;padding:0;overflow-y:auto}.search-modal.active{display:flex}.search-modal-header{display:flex;align-items:center;gap:15px;padding:20px;margin-bottom:20px;position:relative;max-width:100%}.search-modal-input-wrapper{flex:1;position:relative;max-width:500px;margin:0 auto;width:100%}body.modal-open{overflow:hidden}.search-modal-input{width:100%;padding:10px 20px 10px 50px;border:1px solid #fff!important;border-radius:25px;background:#ffffff44!important;color:#000!important;font-size:1rem;outline:0;transition:.3s}.search-modal-input::placeholder{color:#777}.search-modal-input:focus{border-color:#a64a1f!important;box-shadow:0 0 0 3px rgba(255,255,255,.2);background:#ffffff44!important;color:#000!important}.search-modal-input-icon{position:absolute;left:15px;top:50%;transform:translateY(-50%);width:20px;height:20px;pointer-events:none;transition:stroke .3s;stroke:#a64a1f;stroke-width:2}.search-modal-input-wrapper:focus-within .search-modal-input-icon{stroke:#a64a1f}.search-modal-close{width:40px;height:40px;border-radius:50%;background:#000;color:#f7bd36;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:.3s;flex-shrink:0;margin-left:10px}.search-modal-close:hover{background:#333;transform:scale(1.1)}.search-modal-close svg{width:20px;height:20px;stroke:#f7bd36;stroke-width:2}.search-history-section{margin-top:0;padding:0 20px 20px}.search-history-title{font-size:1rem;font-weight:700;color:#000;margin-bottom:15px;display:flex;align-items:center;justify-content:space-between}.search-history-clear{background:0 0;border:none;color:rgba(0,0,0,.6);font-size:.85rem;cursor:pointer;padding:5px 10px;border-radius:8px;transition:.3s}.search-history-clear:hover{background:rgba(0,0,0,.1);color:#000}.search-history-list{list-style:none;padding:0;margin:0}.search-history-item{padding:15px;background:#a64a1f;border-radius:10px;margin-bottom:10px;cursor:pointer;transition:.3s;display:flex;align-items:center;justify-content:space-between;gap:10px}.search-history-item:hover{background:rgba(0,0,0,.05);transform:translateX(5px)}.search-history-text{flex:1;color:#000;font-size:1rem;display:flex;align-items:center;gap:10px}.search-history-text::before{content:'üïí';font-size:.9rem}.search-history-delete{background:0 0;border:none;color:rgba(0,0,0,.4);cursor:pointer;padding:5px;border-radius:5px;transition:.3s;display:flex;align-items:center;justify-content:center}.search-history-delete:hover{background:rgba(0,0,0,.1);color:#000}.search-history-empty{text-align:center;padding:40px 20px;color:rgba(0,0,0,.5);font-size:.9rem}#google-login-button{flex-shrink:0}.user-menu{display:none;align-items:center;gap:10px;position:relative}.user-menu.show{display:flex}.user-button{display:flex;align-items:center;gap:10px;background:0 0;border:none;cursor:pointer;padding:5px;border-radius:50%;transition:.3s}.user-button:hover{background:#ffffff33}.user-avatar{width:40px;height:40px;border-radius:50%;object-fit:cover;border:1px solid #a64a1f}.user-dropdown{position:absolute;top:50px;right:0;background:#f7bd36;border:2px solid #000;border-radius:10px;box-shadow:0 4px 12px rgba(0,0,0,.15);min-width:200px;display:none;z-index:1000}.user-dropdown.show{display:block}.user-dropdown-item{padding:15px 20px;cursor:pointer;transition:background .2s;border-bottom:1px solid rgba(0,0,0,.1)}.user-dropdown-item:last-child{border-bottom:none}.user-dropdown-item:hover{background:rgba(0,0,0,.05)}.user-dropdown-item.logout{color:#e74c3c;font-weight:600}.user-dropdown-item.language-select-item{display:flex;flex-direction:column;gap:6px}.language-select-label{font-size:.85rem;font-weight:600;color:rgba(0,0,0,.7)}.language-select{width:100%;padding:6px 10px;border:1px solid rgba(0,0,0,.2);border-radius:8px;background:#fff;color:#000;font-size:.9rem}.nickname-modal{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);z-index:3000;align-items:center;justify-content:center}.nickname-modal:not(.hidden){display:flex}.nickname-modal-content{background:#f7bd36;padding:30px;border-radius:15px;border:3px solid #000;max-width:500px;width:90%;box-shadow:0 10px 30px rgba(0,0,0,.3)}.nickname-modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.nickname-modal-title{font-size:1.5rem;font-weight:700;color:#000}.close-nickname-modal{background:0 0;border:none;font-size:1.5rem;cursor:pointer;color:#000;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:background .2s}.close-nickname-modal:hover{background:rgba(0,0,0,.1)}.nickname-input-wrapper{margin-bottom:15px}.nickname-input{width:100%;padding:12px 15px;border:2px solid rgba(0,0,0,.3);border-radius:10px;background:#fff;font-size:1rem;outline:0;transition:border-color .3s}.nickname-input:focus{border-color:#000}.nickname-error{color:#e74c3c;font-size:.9rem;margin-top:5px;display:none}.nickname-error:not(.hidden){display:block}.nickname-modal-actions{display:flex;gap:10px;justify-content:flex-end}.nickname-modal-btn{padding:10px 20px;border:2px solid #000;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:.3s}.nickname-modal-btn.confirm{background:#000;color:#f7bd36}.nickname-modal-btn.confirm:hover{background:#333}.nickname-modal-btn.cancel{background:0 0;color:#000}.nickname-modal-btn.cancel:hover{background:rgba(0,0,0,.1)}@media (max-width:900px){.search-wrapper,.user-menu{display:none}.search-icon-button{display:flex}.search-container{justify-content:flex-end}}</style><nav class="top-toolbar"><div class="top-toolbar-container"><div class="logo"><a href="https://www.flit.games/ja/index"><img src="https://www.flit.games/logo.webp" alt="flit.games"></a></div><div class="search-container"><div class="search-wrapper"><input class="search-box" id="searchBox" placeholder="Í≤ÄÏÉâÏñ¥Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî..."> <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><path d="M21 21l-4.35-4.35"></path></svg></div></div><div class="top-toolbar-right"><button class="search-icon-button" id="searchIconButton"><svg viewBox="0 0 24 24" fill="none" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><path d="M21 21l-4.35-4.35"></path></svg></button><div id="google-login-button"></div><div class="user-menu"><button class="user-button" id="userButton"><img src="" alt="User" class="user-avatar" id="userAvatar"></button><div class="user-dropdown" id="userDropdown"><div class="user-dropdown-item" id="userInfo"><div style="font-weight: 600; margin-bottom: 5px;" id="userName"></div><div style="font-size: 0.85rem; color: rgba(0,0,0,0.6);" id="userEmail"></div></div><div class="user-dropdown-item language-select-item" id="languageItem"><label class="language-select-label" for="languageSelect">Language</label> <select id="languageSelect" class="language-select" data-available-langs="en,ko,ja" data-current-lang="ja" data-root-path="https://www.flit.games"></select></div><div class="user-dropdown-item logout" id="logoutItem">Î°úÍ∑∏ÏïÑÏõÉ</div></div></div></div></div></nav><div class="nickname-modal hidden" id="nickname-modal"><div class="nickname-modal-content"><div class="nickname-modal-header"><h3 class="nickname-modal-title">ÎãâÎÑ§ÏûÑ ÏÑ§Ï†ï</h3><button class="close-nickname-modal" id="closeNicknameModal">√ó</button></div><div class="nickname-input-wrapper"><input class="nickname-input" id="nickname-input" placeholder="ÎãâÎÑ§ÏûÑÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî (2-20Ïûê)" maxlength="20"><div class="nickname-error hidden" id="nickname-error"></div></div><div class="nickname-modal-actions"><button class="nickname-modal-btn cancel" id="cancel-nickname">Ï∑®ÏÜå</button> <button class="nickname-modal-btn confirm" id="confirm-nickname">ÌôïÏù∏</button></div></div></div><div class="search-modal" id="searchModal"><div class="search-modal-header"><div class="search-modal-input-wrapper"><input class="search-modal-input" id="searchModalInput" placeholder="Í≤ÄÏÉâÏñ¥Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî..."> <svg class="search-modal-input-icon" viewBox="0 0 24 24" fill="none" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><path d="M21 21l-4.35-4.35"></path></svg></div><button class="search-modal-close" id="searchModalClose"><svg viewBox="0 0 24 24" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div><div class="search-history-section"><div class="search-history-title"><span>Í≤ÄÏÉâ Í∏∞Î°ù</span> <button class="search-history-clear" id="searchHistoryClear">Ï†ÑÏ≤¥ ÏÇ≠Ï†ú</button></div><ul class="search-history-list" id="searchHistoryList"></ul></div></div><script src="https://accounts.google.com/gsi/client" async="" defer=""></script></div><style>.bottom-toolbar{background:#f7bd36;position:fixed;bottom:0;left:0;right:0;z-index:1000;border-top:1px solid #a64a1f;box-shadow:0 0 4px #a64a1f;display:none}.bottom-toolbar-container{display:flex;justify-content:space-around;align-items:center;padding:10px 0;max-width:100%;height:60px}.bottom-toolbar-item{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:4px;flex:1;padding:8px;cursor:pointer;transition:.3s;border:none;background:0 0;color:#000;text-decoration:none;font-size:.75rem}.bottom-toolbar-item:hover{background:#ffffff33;border-radius:8px}.bottom-toolbar-item.active{background:#ffffff44;border-radius:8px}.bottom-toolbar-icon{width:24px;height:24px;stroke:#000;stroke-width:2;fill:none;filter:drop-shadow(0px 0px 6px #ffffff44)}.bottom-toolbar-item svg{width:24px;height:24px;filter:drop-shadow(0px 0px 6px #ffffff44)}.bottom-toolbar-label{font-size:.7rem;color:#000;text-shadow:0 0 6px #ffffff44}@media (max-width:900px){.bottom-toolbar{display:block}}.list-modal{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:#f7bd36;z-index:2000;flex-direction:column;padding:0;overflow-y:auto}.list-modal.active{display:flex}.list-modal-header{display:flex;align-items:center;justify-content:space-between;padding:15px 20px;border-bottom:1px solid #a64a1f;background:#f7bd36;position:sticky;top:0;z-index:2001}.list-modal-title{font-size:1.2rem;font-weight:700;color:#000;margin:0}.list-modal-close{width:32px;height:32px;border:none;background:0 0;cursor:pointer;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:background .3s}.list-modal-close:hover{background:#ffffff33}.list-modal-close svg{width:24px;height:24px;stroke:#000;stroke-width:2}.list-modal-content{flex:1;padding:20px;overflow-y:auto}.list-modal-content .left-toolbar-list{list-style:none;padding:0;margin:0}.list-modal-content .left-toolbar-item{margin-bottom:5px}.list-modal-content .left-toolbar-item a{color:#000;text-decoration:none;padding:8px 15px;border-radius:8px;display:flex;align-items:center;gap:8px;transition:.3s}.list-modal-content .left-toolbar-item a:hover{background:#ffffff33;color:#000}.list-modal-content .game-item-thumbnail{width:40px;height:40px;object-fit:cover;border-radius:4px}.list-modal-content .empty-state{padding:20px;text-align:center;color:#666}.list-modal-content .show-more-btn{width:100%;padding:10px;margin-top:10px;background:#a64a1f;color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:700;transition:background .3s}.list-modal-content .show-more-btn:hover{background:#8a3a17}</style><nav class="bottom-toolbar" id="bottomToolbar"><div class="bottom-toolbar-container"><a href="https://www.flit.games/ja/index" class="bottom-toolbar-item" id="bottomHome"><svg class="bottom-toolbar-icon" viewBox="0 0 24 24" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg> <span class="bottom-toolbar-label">Home</span> </a><button class="bottom-toolbar-item" id="bottomCategories"><svg class="bottom-toolbar-icon" viewBox="0 0 24 24" fill="none" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg> <span class="bottom-toolbar-label">Categories</span></button> <button class="bottom-toolbar-item" id="bottomFavorites"><svg class="bottom-toolbar-icon" viewBox="0 0 24 24" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg> <span class="bottom-toolbar-label">Favorites</span></button> <button class="bottom-toolbar-item" id="bottomRecentlyVisited"><svg class="bottom-toolbar-icon" viewBox="0 0 24 24" fill="none" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <span class="bottom-toolbar-label">Recent</span></button> <button class="bottom-toolbar-item" id="bottomLikes"><svg class="bottom-toolbar-icon" viewBox="0 0 24 24" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg> <span class="bottom-toolbar-label">Likes</span></button></div></nav><div class="list-modal" id="listModal"><div class="list-modal-header"><h2 class="list-modal-title" id="listModalTitle">Î¶¨Ïä§Ìä∏</h2><button class="list-modal-close" id="listModalClose"><svg viewBox="0 0 24 24" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div><div class="list-modal-content" id="listModalContent"></div></div><div class="top-section"><div class="playerContainer" id="playerContainer" data-game-id="Chess" data-thumbnail="https://www.flit.games/games/Board/chess/thumbnail.jpg" data-name="üéÆ „ÉÅ„Çß„Çπ" data-game-url="https://www.flit.games/games/Board/chess/index.html" data-resolution="1024*786" data-is-flash-game="false" data-left-keys="[&quot;ArrowLeft&quot;,&quot;ArrowUp&quot;,&quot;ArrowDown&quot;,&quot;ArrowRight&quot;]" data-right-keys="[&quot;W&quot;,&quot;A&quot;,&quot;S&quot;,&quot;D&quot;,&quot;Space&quot;,&quot;Enter&quot;,&quot;Escape&quot;]"></div><div class="gameinfoContainer"><div class="game-info"><style>.game-title{font-size:1rem;color:#333;margin-bottom:0}.game-category{background:#000;color:#f7bd36;padding:8px 20px;border-radius:25px;display:inline-block;font-size:1rem;font-weight:500}.game-info{background:#f7bd36;border-radius:15px;padding:20px;flex:1;overflow-y:auto;display:flex;flex-direction:column}.game-info-tabs{display:flex;gap:10px;margin-bottom:10px;border-bottom:2px solid rgba(0,0,0,.1)}.game-info-tab{margin-top:6px;padding:10px 20px;background:0 0;border:none;border-bottom:3px solid transparent;cursor:pointer;font-size:1rem;font-weight:500;color:#666;transition:.3s;position:relative;top:2px}.game-info-tab:hover{color:#000;background:rgba(0,0,0,.05)}.game-info-tab.active{color:#000;border-bottom-color:#a64a1f;font-weight:700}.game-info-tab-content{display:none;flex:1;overflow-y:auto}.game-info-tab-content.active{display:block}.game-meta{display:flex;flex-direction:row;align-items:center;gap:8px;margin-top:0}.favorite-badge{display:inline-flex;align-items:center;gap:3px;background:rgba(162,73,30,.15);color:#a2491e;padding:0 2px;border-radius:4px;font-size:.6rem;font-weight:600;letter-spacing:.03em;text-transform:uppercase}.favorite-badge.hidden{display:none}.game-views{display:inline-flex;align-items:center;gap:3px;background:rgba(0,0,0,.08);color:#5b3100;padding:2px 6px;border-radius:4px;font-size:.65rem;font-weight:600;letter-spacing:.03em}.game-views-count{font-weight:600;color:#5b3100}.game-views-label{color:#5b3100;margin-left:0}.game-category-badge{display:inline-flex;align-items:center;gap:3px;background:rgba(0,0,0,.08);color:#5b3100;padding:2px 6px;border-radius:4px;font-size:.65rem;font-weight:600;letter-spacing:.03em;text-transform:uppercase}.game-header{margin-bottom:5px;position:relative;display:flex;flex-direction:column;gap:16px}.game-header-top{display:flex;justify-content:space-between;align-items:flex-start;gap:16px;flex-wrap:wrap;position:relative}.game-title-row{display:flex;flex-direction:row;align-items:center;gap:12px;flex:1;flex-wrap:wrap}.game-meta-row{display:flex;flex-direction:row;align-items:center;gap:12px;flex-wrap:wrap;margin-top:0}.game-header-bottom{display:flex;justify-content:space-between;align-items:flex-start;gap:20px;flex-wrap:wrap;margin-bottom:0}.game-summary-section{flex:1 1 60%}.game-summary-section .game-summary{margin:0}.game-rating-overall{display:inline-flex;align-items:center;background:0 0;color:#5b3100;padding:2px 6px;border-radius:4px;font-size:.65rem;font-weight:600;letter-spacing:.03em;white-space:nowrap;flex:0 0 auto}.game-menu-button{position:absolute;top:-4px;right:0;background:0 0;border:none;cursor:pointer;padding:8px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:background .2s;width:36px;height:36px;flex-shrink:0}.game-menu-button:hover{background:rgba(0,0,0,.1)}.game-menu-button svg{width:20px;height:20px;stroke:#333;stroke-width:2;fill:none}.game-description{font-size:.9rem;line-height:1.6;color:#555;margin-bottom:20px;margin-top:0;white-space:pre-line;max-height:220px;overflow-y:auto;overflow-x:hidden;padding-right:10px}.game-description .key{display:inline-block;padding:4px 8px;margin:0 2px;background:linear-gradient(180deg,#f5f5f5 0,#e8e8e8 100%);border:1px solid #ccc;border-bottom:2px solid #999;border-radius:4px;font-family:'Courier New',monospace;font-size:.9em;font-weight:700;color:#333;box-shadow:0 2px 3px rgba(0,0,0,.1),inset 0 1px 0 rgba(255,255,255,.5);text-transform:uppercase;min-width:24px;text-align:center;line-height:1.2;transition:.1s;cursor:pointer}.game-description .key:hover{transform:translateY(1px);background:linear-gradient(180deg,#e8e8e8 0,#ddd 100%);box-shadow:0 1px 2px rgba(0,0,0,.1),inset 0 1px 0 rgba(255,255,255,.3)}.game-description .key:active{transform:translateY(2px);background:linear-gradient(180deg,#ddd 0,#ccc 100%);box-shadow:0 0 1px rgba(0,0,0,.1),inset 0 1px 2px rgba(0,0,0,.2)}.game-instructions{background:#ffffff05;padding:20px;border-radius:10px;border-left:4px solid #a64a1f}.game-instructions h3{color:#333;margin-bottom:10px;font-size:1.2rem}.game-instructions p{color:#666;line-height:1.5}.game-summary{font-size:.9rem;color:#333;margin:15px 0;line-height:1.5}.game-user-stats{display:flex;justify-content:space-between;align-items:center;margin:5px 0;gap:12px;flex-wrap:wrap}.game-user-rating{display:flex;align-items:center;gap:12px;flex-wrap:wrap}.game-rating{display:flex;align-items:center}.game-rating-user,.game-rating.readonly{cursor:default}.rating-control{position:relative;display:inline-flex;align-items:center}.rating-button{background:#ffffff05;color:#000;border:1px solid #a64a1f;padding:6px 12px;border-radius:14px;font-size:.8rem;font-weight:600;cursor:pointer;transition:background .3s;display:inline-flex;align-items:center;gap:5px;height:32px;box-sizing:border-box}.rating-button:hover:not(.disabled){background:#ffffff44}.rating-button.disabled{cursor:not-allowed;opacity:.65}.rating-button-icon{font-size:.9rem}.rating-count{color:#666;font-size:.85rem;font-weight:500}.game-rating:not(.readonly) .star:hover{transform:scale(1.2)}.game-metrics{display:flex;align-items:center}.game-metrics-text{display:flex;align-items:center;gap:12px;font-size:.9rem;color:#333;white-space:nowrap}.metric-item{background:#ffffff05;color:#000;border:1px solid #a64a1f;padding:6px 12px;border-radius:14px;font-size:.8rem;font-weight:600;cursor:pointer;transition:background .3s;display:inline-flex;align-items:center;gap:5px;height:32px;box-sizing:border-box}.metric-item:hover{background:#ffffff44}.metric-item.liked{background:#e74c3c;border-color:#c0392b;color:#fff}.metric-item.liked:hover{background:#c0392b}.metric-item-icon{font-size:.9rem}@media (max-width:900px){.game-info{flex:none;height:auto;min-height:auto;margin-top:10px;overflow:visible}.game-meta{width:100%;justify-content:flex-start;gap:8px}.game-title{font-size:2rem}}</style><div class="game-header"><div class="game-header-top"><div class="game-title-row"><h1 class="game-title">üéÆ „ÉÅ„Çß„Çπ</h1></div><button class="game-menu-button" id="gameMenuButton" title="Î©îÎâ¥"><svg viewBox="0 0 24 24" fill="none" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="5" r="1"></circle><circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="19" r="1"></circle></svg></button></div><div class="game-meta-row"><div class="game-rating game-rating-overall readonly" id="gameRatingOverall"></div><div class="game-meta"><span class="game-views" id="gameViews" data-raw-value="0" title="0 plays"><span class="game-views-count" id="gameViewsCount">0</span> <span class="game-views-label">PLAYS</span> </span><span class="game-category-badge">Board</span> <span class="favorite-badge hidden" id="favoriteBadge">üéØ</span></div></div><div class="game-header-bottom"><div class="game-summary-section"><div class="game-summary">„ÉÅ„Çß„Çπ„ÅØ2‰∫∫„ÅßÈÅä„Å∂Êà¶Áï•„Ç≤„Éº„É†„Åß„Åô„ÄÇ</div></div></div></div><div class="game-user-stats"><div class="game-user-rating"><div class="game-rating game-rating-user" id="gameRating"><div class="rating-control"><button class="rating-button disabled" id="ratingButton" type="button" disabled=""><span class="rating-button-icon">‚òÖ</span> <span class="rating-button-text" id="ratingButtonText">Î≥ÑÏ†ê Ï£ºÍ∏∞</span></button><div class="rating-popup" id="ratingPopup"></div></div></div></div><div class="game-metrics"><span class="game-metrics-text" id="gameMetrics"></span></div></div><div class="game-info-tabs"><button class="game-info-tab active" data-tab="instructions">Í≤åÏûÑ Ï°∞ÏûëÎ≤ï</button> <button class="game-info-tab" data-tab="info">Í≤åÏûÑ Ï†ïÎ≥¥</button></div><div class="game-info-tab-content active" id="tabInstructions"><div class="game-description">„Ç§„É≥„Éá„Ç£„Éº„Çπ„Çø„Ç∏„Ç™XYZË£Ω‰Ωú</div></div><div class="game-info-tab-content" id="tabInfo"><div class="game-description">„Éó„É¨„Ç§„É§„Éº„ÅåÂÆáÂÆôËàπ„ÇíÊìç‰Ωú„Åó„Å¶Êïµ„ÅÆ„Ç®„Ç§„É™„Ç¢„É≥„ÇíÂÄí„Åô„ÇØ„É©„Ç∑„ÉÉ„ÇØ„Å™„Ç¢„Éº„Ç±„Éº„Éâ„Ç∑„É•„Éº„ÉÜ„Ç£„É≥„Ç∞„Ç≤„Éº„É†„Åß„Åô„ÄÇ</div></div></div></div></div><div class="bottom-section"><div class="commentsContainer"><style>.comments-section{background:#f7bd36;border-radius:15px;padding:20px}.comments-wrapper{display:flex;flex-direction:column;gap:15px;margin-bottom:20px}.comments-container{display:flex;flex-direction:column;gap:15px}.comment-item{padding:15px;border-radius:10px}.comment-body{display:grid;grid-template-columns:auto 1fr;grid-template-rows:auto auto;gap:6px 12px;align-items:center}.comment-avatar{grid-column:1/2;grid-row:1/span 2;width:40px;height:40px;border-radius:50%;object-fit:cover;border:2px solid #a64a1f}.comment-nickname{grid-column:2/3;grid-row:1/2;display:inline-flex;align-items:baseline;gap:8px;font-weight:600;color:#000;font-size:.95rem}.comment-date{font-size:.8rem;color:#666;white-space:nowrap}.comment-content{grid-column:2/3;grid-row:2/3;color:#333;line-height:1.5;white-space:pre-wrap;word-wrap:break-word}.comment-options{grid-column:2/3;grid-row:1/3;justify-self:end;align-self:center;background:0 0;border:none;color:#000;font-size:2rem;cursor:pointer;padding:6px;border-radius:50%;transition:background .2s;display:inline-flex;width:36px;height:36px;align-items:center;justify-content:center}.comment-options:hover{background:rgba(0,0,0,.05)}.comments-empty{text-align:center;padding:40px 20px;color:#666;font-size:1rem;border-radius:10px}.comment-form-wrapper{display:flex;flex-direction:column;gap:12px}.comment-login-notice{background:rgba(255,255,255,.6);border-left:4px solid #a64a1f;padding:12px 16px;border-radius:10px;color:#5b3100;font-weight:600}.comment-form{display:flex;flex-direction:column;gap:10px}.comment-input{width:100%;border:1px solid rgba(166,74,31,.4);border-radius:10px;padding:12px 14px;font-size:1rem;resize:vertical;min-height:30px;background:#ffffff05;color:#2f1900}.comment-input:disabled{background:rgba(0,0,0,.05);cursor:not-allowed}.comment-form-actions{display:flex;align-items:center;justify-content:flex-end;gap:12px}.comment-char-count{font-size:.85rem;color:rgba(47,25,0,.8);margin-right:auto}.comment-submit{background:#a64a1f;color:#fff;border:none;border-radius:999px;padding:10px 20px;font-weight:600;cursor:pointer;transition:background .3s,transform .2s}.comment-submit:hover:not(:disabled){background:#c65e29;transform:translateY(-1px)}.comment-submit:disabled{opacity:.6;cursor:not-allowed}.comment-cancel{background:0 0;border:1px solid rgba(166,74,31,.5);color:#a64a1f;border-radius:999px;padding:8px 18px;font-weight:600;cursor:pointer;transition:background .3s,color .3s}.comment-cancel:hover:not(:disabled){background:rgba(166,74,31,.12)}.comment-cancel:disabled{opacity:.6;cursor:not-allowed}.my-comment-section{padding:0;margin-bottom:12px}.visually-hidden{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}</style><div class="comments-section"><div class="comment-form-wrapper" id="commentFormWrapper"><div class="comment-login-notice hidden" id="commentLoginNotice">ÎåìÍ∏ÄÏùÑ ÏûëÏÑ±ÌïòÎ†§Î©¥ Î°úÍ∑∏Ïù∏Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§.</div><form class="comment-form" id="commentForm"><label class="visually-hidden" for="commentInput">ÎåìÍ∏Ä ÏûÖÎ†•</label> <textarea id="commentInput" class="comment-input" maxlength="200" rows="3" placeholder="ÎåìÍ∏ÄÏùÑ ÎÇ®Í≤®Ï£ºÏÑ∏Ïöî." required=""></textarea><div class="comment-form-actions"><span class="comment-char-count" id="commentCharCount">0 / 200</span> <button type="button" class="comment-cancel hidden" id="commentCancelEdit">ÏàòÏ†ï Ï∑®ÏÜå</button> <button type="submit" class="comment-submit" id="commentSubmit">ÎåìÍ∏Ä Îì±Î°ù</button></div></form></div><div class="my-comment-section hidden" id="myCommentSection"><div class="my-comment-container" id="myCommentContainer"></div></div><div class="comments-wrapper"><div class="comments-container" id="commentsContainer"></div><div class="comments-empty hidden" id="commentsEmptyState">ÏïÑÏßÅ Îã§Î•∏ ÎåìÍ∏ÄÏù¥ ÏóÜÏäµÎãàÎã§.</div></div></div></div><div class="recommendationContainer"><style>.recommendation-section{background:#f7bd36;border-radius:15px;padding:20px}.recommendation-list{display:flex;flex-direction:column;gap:14px}.recommendation-card{display:block;border-radius:12px;padding:10px;text-decoration:none;color:inherit;transition:transform .3s,box-shadow .3s}.recommendation-card:hover{transform:translateY(-5px);box-shadow:0 10px 30px rgba(0,0,0,.1)}.recommendation-thumb{width:100%;aspect-ratio:4/3;object-fit:cover;border-radius:10px}.recommendation-card-body{padding:10px 4px 4px;display:flex;flex-direction:column;gap:8px}.recommendation-card-header{display:flex;justify-content:space-between;align-items:center;gap:12px}.recommendation-title{font-size:1rem;font-weight:700;color:#333;margin:0;flex:1}.recommendation-play{background:#ffffff05;color:#000;border:1px solid #a64a1f;padding:5px 10px;border-radius:16px;font-size:.8rem;font-weight:600;white-space:nowrap;transition:background .3s}.recommendation-card:hover .recommendation-play{background:#ffffff44}.recommendation-summary{font-size:.9rem;color:#666;margin:0;line-height:1.4;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;max-width:40ch}.recommendation-stats{display:flex;justify-content:space-between;align-items:center;gap:8px;margin-top:8px;font-size:.8rem;color:#666;flex-wrap:wrap}.recommendation-metrics{display:flex;align-items:center;gap:8px;font-size:.75rem;color:#666;white-space:nowrap}.recommendation-metric{display:inline-flex;align-items:center;gap:4px}.recommendation-empty{background:rgba(255,255,255,.6);border-radius:10px;padding:16px;text-align:center;color:rgba(47,25,0,.8)}@media (max-width:900px){.recommendation-card{padding:8px;transform:none!important;box-shadow:none!important}}</style><div class="recommendation-section"><div class="recommendation-list"><a class="recommendation-card" href="https://www.flit.games/games/Escape/dante/ja/detail.html" data-game-id="Dante"><div class="visually-hidden recommendation-card-game-id"></div><img class="recommendation-thumb" src="https://www.flit.games/games/Escape/dante/thumbnail.jpg" alt="üéÆ „ÉÄ„Éã„Ç®„É´ Ïç∏ÎÑ§Ïùº"><div class="recommendation-card-body"><div class="recommendation-card-header"><div class="recommendation-title">üéÆ „ÉÄ„Éã„Ç®„É´</div><span class="recommendation-play">‚ñ∂ PLAY</span></div><p class="recommendation-summary">„ÉÅ„Çß„Çπ„ÅØ2‰∫∫„ÅßÈÅä„Å∂Êà¶Áï•„Ç≤„Éº„É†„Åß„Åô„ÄÇ</p><div class="recommendation-stats"><div class="recommendation-metric rating" data-role="rating"></div><div class="recommendation-metrics"></div></div></div></a><a class="recommendation-card" href="https://www.flit.games/games/Logic/ludum/ja/detail.html" data-game-id="Ludum"><div class="visually-hidden recommendation-card-game-id"></div><img class="recommendation-thumb" src="https://www.flit.games/games/Logic/ludum/thumbnail.jpg" alt="„É´„Éº„Éâ„É† Ïç∏ÎÑ§Ïùº"><div class="recommendation-card-body"><div class="recommendation-card-header"><div class="recommendation-title">„É´„Éº„Éâ„É†</div><span class="recommendation-play">‚ñ∂ PLAY</span></div><p class="recommendation-summary">„ÉÅ„Çß„Çπ„ÅØ2‰∫∫„ÅßÈÅä„Å∂Êà¶Áï•„Ç≤„Éº„É†„Åß„Åô„ÄÇ</p><div class="recommendation-stats"><div class="recommendation-metric rating" data-role="rating"></div><div class="recommendation-metrics"></div></div></div></a><a class="recommendation-card" href="https://www.flit.games/games/Arcade/circus/ja/detail.html" data-game-id="RetroCircus"><div class="visually-hidden recommendation-card-game-id"></div><img class="recommendation-thumb" src="https://www.flit.games/games/Arcade/circus/thumbnail.jpg" alt="üé™ „Çµ„Éº„Ç´„Çπ Ïç∏ÎÑ§Ïùº"><div class="recommendation-card-body"><div class="recommendation-card-header"><div class="recommendation-title">üé™ „Çµ„Éº„Ç´„Çπ</div><span class="recommendation-play">‚ñ∂ PLAY</span></div><p class="recommendation-summary">„ÉÅ„Çß„Çπ„ÅØ2‰∫∫„ÅßÈÅä„Å∂Êà¶Áï•„Ç≤„Éº„É†„Åß„Åô„ÄÇ</p><div class="recommendation-stats"><div class="recommendation-metric rating" data-role="rating"></div><div class="recommendation-metrics"></div></div></div></a><a class="recommendation-card" href="https://www.flit.games/games/platformer/spelunky/ja/detail.html" data-game-id="Spelunky"><div class="visually-hidden recommendation-card-game-id"></div><img class="recommendation-thumb" src="https://www.flit.games/games/platformer/spelunky/thumbnail.jpg" alt="üéÆ Spelunky Ïç∏ÎÑ§Ïùº"><div class="recommendation-card-body"><div class="recommendation-card-header"><div class="recommendation-title">üéÆ Spelunky</div><span class="recommendation-play">‚ñ∂ PLAY</span></div><p class="recommendation-summary">„ÉÅ„Çß„Çπ„ÅØ2‰∫∫„ÅßÈÅä„Å∂Êà¶Áï•„Ç≤„Éº„É†„Åß„Åô„ÄÇ</p><div class="recommendation-stats"><div class="recommendation-metric rating" data-role="rating"></div><div class="recommendation-metrics"></div></div></div></a><a class="recommendation-card" href="https://www.flit.games/games/platformer/JumpingDead/ja/detail.html" data-game-id="JumpingDead"><div class="visually-hidden recommendation-card-game-id"></div><img class="recommendation-thumb" src="https://www.flit.games/games/platformer/JumpingDead/thumbnail.jpg" alt="üéÆ „Ç∏„É£„É≥„Éó „Éá„ÉÉ„Éâ Ïç∏ÎÑ§Ïùº"><div class="recommendation-card-body"><div class="recommendation-card-header"><div class="recommendation-title">üéÆ „Ç∏„É£„É≥„Éó „Éá„ÉÉ„Éâ</div><span class="recommendation-play">‚ñ∂ PLAY</span></div><p class="recommendation-summary">„ÉÅ„Çß„Çπ„ÅØ2‰∫∫„ÅßÈÅä„Å∂Êà¶Áï•„Ç≤„Éº„É†„Åß„Åô„ÄÇ</p><div class="recommendation-stats"><div class="recommendation-metric rating" data-role="rating"></div><div class="recommendation-metrics"></div></div></div></a><a class="recommendation-card" href="https://www.flit.games/games/platformer/NGon/ja/detail.html" data-game-id="NGon"><div class="visually-hidden recommendation-card-game-id"></div><img class="recommendation-thumb" src="https://www.flit.games/games/platformer/NGon/thumbnail.jpg" alt="üéÆ NGon Ïç∏ÎÑ§Ïùº"><div class="recommendation-card-body"><div class="recommendation-card-header"><div class="recommendation-title">üéÆ NGon</div><span class="recommendation-play">‚ñ∂ PLAY</span></div><p class="recommendation-summary">„ÉÅ„Çß„Çπ„ÅØ2‰∫∫„ÅßÈÅä„Å∂Êà¶Áï•„Ç≤„Éº„É†„Åß„Åô„ÄÇ</p><div class="recommendation-stats"><div class="recommendation-metric rating" data-role="rating"></div><div class="recommendation-metrics"></div></div></div></a><a class="recommendation-card" href="https://www.flit.games/games/Arcade/Minesweeper/ja/detail.html" data-game-id="Minesweeper"><div class="visually-hidden recommendation-card-game-id"></div><img class="recommendation-thumb" src="https://www.flit.games/games/Arcade/Minesweeper/thumbnail.jpg" alt="üí£ „Éû„Ç§„É≥„Çπ„Ç§„Éº„Éë„Éº Ïç∏ÎÑ§Ïùº"><div class="recommendation-card-body"><div class="recommendation-card-header"><div class="recommendation-title">üí£ „Éû„Ç§„É≥„Çπ„Ç§„Éº„Éë„Éº</div><span class="recommendation-play">‚ñ∂ PLAY</span></div><p class="recommendation-summary">„ÉÅ„Çß„Çπ„ÅØ2‰∫∫„ÅßÈÅä„Å∂Êà¶Áï•„Ç≤„Éº„É†„Åß„Åô„ÄÇ</p><div class="recommendation-stats"><div class="recommendation-metric rating" data-role="rating"></div><div class="recommendation-metrics"></div></div></div></a><a class="recommendation-card" href="https://www.flit.games/games/Action/abobosbigadventure/ja/detail.html" data-game-id="abobosbigadventure"><div class="visually-hidden recommendation-card-game-id"></div><img class="recommendation-thumb" src="https://www.flit.games/games/Action/abobosbigadventure/thumbnail.jpg" alt="üí™üèæ „Ç¢„Éú„Éú„ÅÆÂ§ßÂÜíÈô∫ Ïç∏ÎÑ§Ïùº"><div class="recommendation-card-body"><div class="recommendation-card-header"><div class="recommendation-title">üí™üèæ „Ç¢„Éú„Éú„ÅÆÂ§ßÂÜíÈô∫</div><span class="recommendation-play">‚ñ∂ PLAY</span></div><p class="recommendation-summary">„ÉÄ„Éñ„É´„Éâ„É©„Ç¥„É≥„ÅÆ„Ç≠„É£„É©„ÇØ„Çø„Éº„ÄÅ„Ç¢„Éú„Éú„Çí‰Ωø„Å£„Å¶„Ç≤„Éº„É†„ÅÆÊßò„ÄÖ„Å™„É¨„Éô„É´„ÇíÈÄ≤„Çì„Åß„ÅÑ„Åè„Éë„É≠„Éá„Ç£„Éº „Éì„Éº„Éà '„Ç®„É† „Ç¢„ÉÉ„Éó „Ç≤„Éº„É†„Åß„Åô„ÄÇ</p><div class="recommendation-stats"><div class="recommendation-metric rating" data-role="rating"></div><div class="recommendation-metrics"></div></div></div></a><a class="recommendation-card" href="https://www.flit.games/games/Race/gopher/ja/detail.html" data-game-id="Gopher"><div class="visually-hidden recommendation-card-game-id"></div><img class="recommendation-thumb" src="https://www.flit.games/games/Race/gopher/thumbnail.jpg" alt="üéÆ „Ç¥„Éº„Éï„Ç°„Éº Ïç∏ÎÑ§Ïùº"><div class="recommendation-card-body"><div class="recommendation-card-header"><div class="recommendation-title">üéÆ „Ç¥„Éº„Éï„Ç°„Éº</div><span class="recommendation-play">‚ñ∂ PLAY</span></div><p class="recommendation-summary">„ÉÅ„Çß„Çπ„ÅØ2‰∫∫„ÅßÈÅä„Å∂Êà¶Áï•„Ç≤„Éº„É†„Åß„Åô„ÄÇ</p><div class="recommendation-stats"><div class="recommendation-metric rating" data-role="rating"></div><div class="recommendation-metrics"></div></div></div></a><a class="recommendation-card" href="https://www.flit.games/games/platformer/elemental/ja/detail.html" data-game-id="Elemental"><div class="visually-hidden recommendation-card-game-id"></div><img class="recommendation-thumb" src="https://www.flit.games/games/platformer/elemental/thumbnail.jpg" alt="üéÆ „Ç®„É¨„É°„É≥„Çø„É´ Ïç∏ÎÑ§Ïùº"><div class="recommendation-card-body"><div class="recommendation-card-header"><div class="recommendation-title">üéÆ „Ç®„É¨„É°„É≥„Çø„É´</div><span class="recommendation-play">‚ñ∂ PLAY</span></div><p class="recommendation-summary">„ÉÅ„Çß„Çπ„ÅØ2‰∫∫„ÅßÈÅä„Å∂Êà¶Áï•„Ç≤„Éº„É†„Åß„Åô„ÄÇ</p><div class="recommendation-stats"><div class="recommendation-metric rating" data-role="rating"></div><div class="recommendation-metrics"></div></div></div></a></div></div></div></div><style>.virtual-keyboard-wrapper{position:fixed;bottom:0;left:0;right:0;z-index:10000;display:none}.virtual-keyboard-wrapper.active{display:block}.virtual-keyboard{background:#d1d4db;padding:4px;border-top:1px solid rgba(0,0,0,.1);box-shadow:0 -4px 30px rgba(0,0,0,.3);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px)}.keyboard-close-btn{position:absolute;top:0;right:4px;width:32px;height:32px;background:linear-gradient(to bottom,#ff3b30 0,#d32f2f 100%);color:#fff;border:none;border-radius:6px;font-size:18px;font-weight:700;cursor:pointer;display:flex;align-items:center;justify-content:center;z-index:10001;box-shadow:0 2px 4px rgba(0,0,0,.3),inset 0 1px 0 rgba(255,255,255,.3),inset 0 -1px 0 rgba(0,0,0,.2);transition:.1s;user-select:none;-webkit-user-select:none;touch-action:manipulation}.keyboard-close-btn:hover{background:linear-gradient(to bottom,#ff5757 0,#e53935 100%);transform:scale(1.05)}.keyboard-close-btn:active{transform:scale(.95);box-shadow:0 1px 2px rgba(0,0,0,.3),inset 0 2px 4px rgba(0,0,0,.3)}.keyboard-container{position:relative;display:flex;gap:8px;max-width:100%;padding:0 4px;align-items:flex-start}.keyboard-left{position:relative;width:192px;height:147px;flex-shrink:0;cursor:pointer;border-radius:8px;transition:background .1s;user-select:none;-webkit-user-select:none}.keyboard-right{display:flex;flex-direction:row-reverse;flex-wrap:wrap-reverse;gap:6px;position:absolute;top:51px;left:195px;width:calc(100% - 195px);height:96px}.keyboard-left .keyboard-key{width:45px;height:45px;min-width:45px;min-height:45px;position:absolute;pointer-events:none}.keyboard-left .keyboard-key[data-key=ArrowUp]{left:49px;top:0}.keyboard-left .keyboard-key[data-key=ArrowDown]{left:49px;bottom:0;top:auto}.keyboard-left .keyboard-key[data-key=ArrowLeft]{left:0;top:50%;transform:translateY(-50%)}.keyboard-left .keyboard-key[data-key=ArrowRight]{left:98px;top:50%;transform:translateY(-50%)}.keyboard-right .keyboard-key{width:45px;height:45px;min-width:45px;min-height:45px;max-width:45px;max-height:45px}.keyboard-key{width:45px;height:45px;min-width:45px;min-height:45px;background:linear-gradient(to bottom,#fff 0,#e8e8e8 100%);color:#1c1c1e;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:.1s;user-select:none;-webkit-user-select:none;touch-action:manipulation;box-shadow:0 2px 4px rgba(0,0,0,.3),inset 0 1px 0 rgba(255,255,255,.8),inset 0 -1px 0 rgba(0,0,0,.1);position:relative;overflow:hidden}.keyboard-key::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(to bottom,rgba(255,255,255,.3) 0,transparent 50%);pointer-events:none;border-radius:8px}.keyboard-key:hover{background:linear-gradient(to bottom,#f5f5f5 0,#d8d8d8 100%);transform:translateY(-1px);box-shadow:0 3px 6px rgba(0,0,0,.4),inset 0 1px 0 rgba(255,255,255,.9),inset 0 -1px 0 rgba(0,0,0,.1)}.keyboard-key.pressed,.keyboard-key:active{transform:translateY(1px) scale(.98);background:linear-gradient(to bottom,#d8d8d8 0,silver 100%);box-shadow:0 1px 2px rgba(0,0,0,.3),inset 0 2px 4px rgba(0,0,0,.2)}.keyboard-key.close-btn{background:linear-gradient(to bottom,#ff3b30 0,#d32f2f 100%);color:#fff;box-shadow:0 2px 4px rgba(0,0,0,.3),inset 0 1px 0 rgba(255,255,255,.3),inset 0 -1px 0 rgba(0,0,0,.2)}.keyboard-key.close-btn:hover{background:linear-gradient(to bottom,#ff5757 0,#e53935 100%);transform:translateY(-1px);box-shadow:0 3px 6px rgba(0,0,0,.4),inset 0 1px 0 rgba(255,255,255,.4),inset 0 -1px 0 rgba(0,0,0,.2)}.keyboard-key.close-btn:active{background:linear-gradient(to bottom,#d32f2f 0,#b71c1c 100%);transform:translateY(1px) scale(.98);box-shadow:0 1px 2px rgba(0,0,0,.3),inset 0 2px 4px rgba(0,0,0,.3)}.keyboard-toggle-btn{position:fixed;bottom:60px;right:20px;width:56px;height:56px;background:linear-gradient(to bottom,#f7bd36 0,#d4a12a 100%);color:#000;border:2px solid rgba(0,0,0,.2);border-radius:50%;font-size:26px;cursor:pointer;display:none;align-items:center;justify-content:center;z-index:9999;box-shadow:0 4px 12px rgba(0,0,0,.4),inset 0 1px 0 rgba(255,255,255,.3),inset 0 -1px 0 rgba(0,0,0,.1);transition:.3s;user-select:none;-webkit-user-select:none;touch-action:manipulation}.keyboard-toggle-btn:hover{background:linear-gradient(to bottom,#d4a12a 0,#b89224 100%);transform:scale(1.05);box-shadow:0 6px 16px rgba(0,0,0,.5),inset 0 1px 0 rgba(255,255,255,.4),inset 0 -1px 0 rgba(0,0,0,.1)}.keyboard-toggle-btn:active{transform:scale(.95);box-shadow:0 2px 6px rgba(0,0,0,.3),inset 0 2px 4px rgba(0,0,0,.2)}.keyboard-toggle-btn.active{display:flex}.keyboard-toggle-btn::before{content:'‚å®Ô∏è';filter:drop-shadow(0 1px 2px rgba(0, 0, 0, .3))}</style><div class="virtual-keyboard-wrapper"><div class="virtual-keyboard" id="virtualKeyboard"><div class="keyboard-container"><div class="keyboard-left" id="keyboardLeft"></div><div class="keyboard-right" id="keyboardRight"></div><button class="keyboard-close-btn" id="keyboardCloseBtn">‚úï</button></div></div></div><button class="keyboard-toggle-btn" id="keyboardToggleBtn"></button><script>const isTestMode = false;
const API_BASE_URL = "https://flitserver.by4bit.workers.dev";
const AVAILABLE_LANGS = ["en","ko","ja"];
const CURRENT_LANG = "ja";
const ROOT_PATH = "https://www.flit.games";
(()=>{function e(e,t){if("undefined"==typeof document||!t)return null;const n=document.getElementById(e);if(n)return n;const i=document.createElement("style");return i.id=e,i.textContent=t,document.head.appendChild(i),i}function t(){return"desktop"!==function(){const e=navigator.userAgent.toLowerCase();return/mobile|iphone|ipod|android.*mobile|windows phone/.test(e)?"mobile":/ipad|tablet|android(?!.*mobile)/.test(e)?"tablet":"desktop"}()}async function n(e,t={}){try{const n=localStorage.getItem("auth_token");n&&(t.headers={...t.headers,Authorization:`Bearer ${n}`});const i=await fetch(e,t);if(401===i.status)throw await async function(e){localStorage.removeItem("user"),localStorage.removeItem("auth_token");let t="Î°úÍ∑∏Ïù∏ ÏÑ∏ÏÖòÏù¥ ÎßåÎ£åÎêòÏóàÏäµÎãàÎã§.";try{const n=await e.json();n.message&&(t+=`\n\nÏÉÅÏÑ∏: ${n.message}`)}catch(e){}alert(t+"\n\nÎã§Ïãú Î°úÍ∑∏Ïù∏Ìï¥Ï£ºÏÑ∏Ïöî.");const n=isTestMode?"/index.html":"/index";window.location.href=n}(i),new Error("Unauthorized - Session expired");return i}catch(e){throw e}}let i=!1;const a=new class{constructor(){this.baseDbName="flitGamesDB",this.dbName="flitGamesDB",this.storeName="games",this.metaStoreName="meta",this.likesStoreName="game_likes",this.favoritesStoreName="game_favorites",this.ratingsStoreName="game_ratings",this.commentsStoreName="comments",this.db=null,this._initPromise=null}setDbName(e){if(!e)return void(this.dbName=this.baseDbName);let t=String(e).replace(/[^a-zA-Z0-9]/g,"_").toLowerCase();this.dbName=`${this.baseDbName}_${t}`}async close(){this.db&&(this.db.close(),this.db=null,this._initPromise=null)}async reinitialize(e){return await this.close(),this.setDbName(e),await this.init()}async init(){return this.db?this.db:(this._initPromise||(this._initPromise=new Promise((e,t)=>{const n=indexedDB.open(this.dbName);n.onerror=()=>{this._initPromise=null,t(new Error("IndexedDB Ï¥àÍ∏∞Ìôî Ïã§Ìå®"))},n.onsuccess=()=>{this.db=n.result,this._initPromise=null,e(this.db)},n.onupgradeneeded=e=>{const t=e.target.result;if(!t.objectStoreNames.contains(this.storeName)){t.createObjectStore(this.storeName,{keyPath:"id"}).createIndex("id","id",{unique:!0})}if(t.objectStoreNames.contains(this.metaStoreName)||t.createObjectStore(this.metaStoreName,{keyPath:"key"}),!t.objectStoreNames.contains(this.likesStoreName)){t.createObjectStore(this.likesStoreName,{keyPath:"game_id"}).createIndex("game_id","game_id",{unique:!0})}if(!t.objectStoreNames.contains(this.favoritesStoreName)){t.createObjectStore(this.favoritesStoreName,{keyPath:"game_id"}).createIndex("game_id","game_id",{unique:!0})}if(!t.objectStoreNames.contains(this.ratingsStoreName)){t.createObjectStore(this.ratingsStoreName,{keyPath:"game_id"}).createIndex("game_id","game_id",{unique:!0})}if(!t.objectStoreNames.contains(this.commentsStoreName)){t.createObjectStore(this.commentsStoreName,{keyPath:"game_id"}).createIndex("game_id","game_id",{unique:!0})}}})),this._initPromise)}async saveGames(e){return this.db||await this.init(),new Promise((t,n)=>{const i=this.db.transaction([this.storeName],"readwrite"),a=i.objectStore(this.storeName);a.clear(),e.forEach(e=>{a.add({id:e.id,view_count:e.view_count||0,like_count:e.like_count||0,score:e.score||0,rating_total:e.rating_total||0,rating_count:e.rating_count||0,rating_avg:e.rating_avg||0,created_at:e.created_at||(new Date).toISOString()})}),i.oncomplete=()=>{t()},i.onerror=()=>{n(new Error("Í≤åÏûÑ Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû• Ïã§Ìå®"))}})}async getGames(){return this.db||await this.init(),new Promise((e,t)=>{const n=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).getAll();n.onsuccess=()=>{e(n.result||[])},n.onerror=()=>{t(new Error("Í≤åÏûÑ Îç∞Ïù¥ÌÑ∞ Ï°∞Ìöå Ïã§Ìå®"))}})}async getGame(e){return this.db||await this.init(),new Promise((t,n)=>{const i=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).get(e);i.onsuccess=()=>{t(i.result||null)},i.onerror=()=>{n(new Error("Í≤åÏûÑ Îç∞Ïù¥ÌÑ∞ Ï°∞Ìöå Ïã§Ìå®"))}})}async updateGames(e){return this.db||await this.init(),new Promise((t,n)=>{const i=this.db.transaction([this.storeName],"readwrite"),a=i.objectStore(this.storeName),s=e.map(e=>new Promise((t,n)=>{const i=a.get(e.id);i.onsuccess=()=>{const s=i.result,o={id:e.id,view_count:s?.view_count??e.view_count??0,like_count:s?.like_count??e.like_count??0,score:s?.score??e.score??0,rating_total:s?.rating_total??e.rating_total??0,rating_count:s?.rating_count??e.rating_count??0,rating_avg:s?.rating_avg??e.rating_avg??0,created_at:s?.created_at??e.created_at??(new Date).toISOString()},r=a.put(o);r.onsuccess=()=>t(),r.onerror=()=>n(new Error(`Í≤åÏûÑ ${e.id} ÏóÖÎç∞Ïù¥Ìä∏ Ïã§Ìå®`))},i.onerror=()=>n(new Error(`Í≤åÏûÑ ${e.id} Ï°∞Ìöå Ïã§Ìå®`))}));Promise.all(s).then(()=>{i.oncomplete=()=>t()}).catch(n)})}async setLastUpdateDate(e){return this.db||await this.init(),new Promise((t,n)=>{const i=this.db.transaction([this.metaStoreName],"readwrite").objectStore(this.metaStoreName).put({key:"lastUpdateDate",value:e});i.onsuccess=()=>t(),i.onerror=()=>n(new Error("ÏóÖÎç∞Ïù¥Ìä∏ ÎÇ†Ïßú Ï†ÄÏû• Ïã§Ìå®"))})}async getLastUpdateDate(){return this.db||await this.init(),new Promise((e,t)=>{const n=this.db.transaction([this.metaStoreName],"readonly").objectStore(this.metaStoreName).get("lastUpdateDate");n.onsuccess=()=>{const t=n.result;e(t?t.value:null)},n.onerror=()=>{t(new Error("ÏóÖÎç∞Ïù¥Ìä∏ ÎÇ†Ïßú Ï°∞Ìöå Ïã§Ìå®"))}})}async needsUpdate(){try{const e=await this.getLastUpdateDate();if(!e)return!0;const t=new Date(e),n=new Date;return(n-t)/864e5>=1}catch(e){return!0}}async fetchGamesFromServer(){try{const e="https://www.flit.games/api/games",t=await fetch(e);if(!t.ok)throw new Error(`ÏÑúÎ≤Ñ ÏùëÎãµ Ïò§Î•ò: ${t.status}`);const n=await t.json();if(n.success&&n.data)return await this.saveGames(n.data),await this.setLastUpdateDate(n.updated_at||(new Date).toISOString()),n.data;throw new Error("ÏÑúÎ≤Ñ ÏùëÎãµ ÌòïÏãù Ïò§Î•ò")}catch(e){throw e}}async syncGames(e){try{let t=await this.getGames();if(0===t.length||await this.needsUpdate())try{t=await this.fetchGamesFromServer()}catch(e){t=await this.getGames()}const n=new Map;t.forEach(e=>{n.set(e.id,e)}),e.forEach(e=>{n.has(e.id)||n.set(e.id,{id:e.id,view_count:0,like_count:0,score:0,rating_total:0,rating_count:0,rating_avg:0,created_at:(new Date).toISOString()})});const i=Array.from(n.values());return await this.updateGames(i),i}catch(t){return e.map(e=>({id:e.id,view_count:0,like_count:0,score:0,rating_total:0,rating_count:0,rating_avg:0,created_at:(new Date).toISOString()}))}}async addLike(e,t={}){return this.db||await this.init(),new Promise((n,i)=>{const a=this.db.transaction([this.likesStoreName],"readwrite").objectStore(this.likesStoreName),s=(new Date).toISOString(),o=a.put({game_id:e,name:t.name||null,thumbnail:t.thumbnail||null,url:t.url||null,category:t.category||null,created_at:t.created_at||s,updated_at:s});o.onsuccess=()=>n(!0),o.onerror=()=>i(new Error("Ï¢ãÏïÑÏöî Ï∂îÍ∞Ä Ïã§Ìå®"))})}async removeLike(e){return this.db||await this.init(),new Promise((t,n)=>{const i=this.db.transaction([this.likesStoreName],"readwrite").objectStore(this.likesStoreName).delete(e);i.onsuccess=()=>t(!0),i.onerror=()=>n(new Error("Ï¢ãÏïÑÏöî Ï†úÍ±∞ Ïã§Ìå®"))})}async isLiked(e){return this.db||await this.init(),new Promise((t,n)=>{const i=this.db.transaction([this.likesStoreName],"readonly").objectStore(this.likesStoreName).get(e);i.onsuccess=()=>t(!!i.result),i.onerror=()=>n(new Error("Ï¢ãÏïÑÏöî ÏÉÅÌÉú ÌôïÏù∏ Ïã§Ìå®"))})}async getAllLikes(){return this.db||await this.init(),new Promise((e,t)=>{const n=this.db.transaction([this.likesStoreName],"readonly").objectStore(this.likesStoreName).getAll();n.onsuccess=()=>e(n.result||[]),n.onerror=()=>t(new Error("Ï¢ãÏïÑÏöî Î™©Î°ù Ï°∞Ìöå Ïã§Ìå®"))})}async addFavorite(e,t={}){return this.db||await this.init(),new Promise((n,i)=>{const a=this.db.transaction([this.favoritesStoreName],"readwrite").objectStore(this.favoritesStoreName),s=(new Date).toISOString(),o={game_id:e,name:t.name||null,thumbnail:t.thumbnail||null,url:t.url||null,category:t.category||null,created_at:t.created_at||s,updated_at:s},r=a.put(o);r.onsuccess=()=>n(!0),r.onerror=()=>i(new Error("Ï¶êÍ≤®Ï∞æÍ∏∞ Ï∂îÍ∞Ä Ïã§Ìå®"))})}async removeFavorite(e){return this.db||await this.init(),new Promise((t,n)=>{const i=this.db.transaction([this.favoritesStoreName],"readwrite").objectStore(this.favoritesStoreName).delete(e);i.onsuccess=()=>t(!0),i.onerror=()=>n(new Error("Ï¶êÍ≤®Ï∞æÍ∏∞ Ï†úÍ±∞ Ïã§Ìå®"))})}async isFavorite(e){return this.db||await this.init(),new Promise((t,n)=>{const i=this.db.transaction([this.favoritesStoreName],"readonly").objectStore(this.favoritesStoreName).get(e);i.onsuccess=()=>t(!!i.result),i.onerror=()=>n(new Error("Ï¶êÍ≤®Ï∞æÍ∏∞ ÏÉÅÌÉú ÌôïÏù∏ Ïã§Ìå®"))})}async getAllFavorites(){return this.db||await this.init(),new Promise((e,t)=>{const n=this.db.transaction([this.favoritesStoreName],"readonly").objectStore(this.favoritesStoreName).getAll();n.onsuccess=()=>e(n.result||[]),n.onerror=()=>t(new Error("Ï¶êÍ≤®Ï∞æÍ∏∞ Î™©Î°ù Ï°∞Ìöå Ïã§Ìå®"))})}async setRating(e,t){return this.db||await this.init(),new Promise((n,i)=>{const a=this.db.transaction([this.ratingsStoreName],"readwrite").objectStore(this.ratingsStoreName).put({game_id:e,rating:t,created_at:(new Date).toISOString()});a.onsuccess=()=>n(!0),a.onerror=()=>i(new Error("ÌèâÏ†ê Ï†ÄÏû• Ïã§Ìå®"))})}async removeRating(e){return this.db||await this.init(),new Promise((t,n)=>{const i=this.db.transaction([this.ratingsStoreName],"readwrite").objectStore(this.ratingsStoreName).delete(e);i.onsuccess=()=>t(!0),i.onerror=()=>n(new Error("ÌèâÏ†ê Ï†úÍ±∞ Ïã§Ìå®"))})}async getRating(e){return this.db||await this.init(),new Promise((t,n)=>{const i=this.db.transaction([this.ratingsStoreName],"readonly").objectStore(this.ratingsStoreName).get(e);i.onsuccess=()=>t(i.result?i.result.rating:null),i.onerror=()=>n(new Error("ÌèâÏ†ê Ï°∞Ìöå Ïã§Ìå®"))})}async getAllRatings(){return this.db||await this.init(),new Promise((e,t)=>{const n=this.db.transaction([this.ratingsStoreName],"readonly").objectStore(this.ratingsStoreName).getAll();n.onsuccess=()=>e(n.result||[]),n.onerror=()=>t(new Error("ÌèâÏ†ê Î™©Î°ù Ï°∞Ìöå Ïã§Ìå®"))})}async getUserGameData(e){this.db||await this.init();try{const[t,n,i]=await Promise.all([this.isLiked(e),this.isFavorite(e),this.getRating(e)]);return{isLiked:t,isFavorite:n,rating:i}}catch(e){return{isLiked:!1,isFavorite:!1,rating:null}}}async setUserComment(e,t){return this.db||await this.init(),new Promise((n,i)=>{const a=this.db.transaction([this.commentsStoreName],"readwrite").objectStore(this.commentsStoreName),s={game_id:e,comment:t||null,updated_at:(new Date).toISOString()},o=a.put(s);o.onsuccess=()=>n(!0),o.onerror=()=>i(new Error("ÏÇ¨Ïö©Ïûê ÎåìÍ∏Ä Ï†ÄÏû• Ïã§Ìå®"))})}async getUserComment(e){return this.db||await this.init(),new Promise((t,n)=>{const i=this.db.transaction([this.commentsStoreName],"readonly").objectStore(this.commentsStoreName).get(e);i.onsuccess=()=>{const e=i.result;t(e?e.comment:null)},i.onerror=()=>n(new Error("ÏÇ¨Ïö©Ïûê ÎåìÍ∏Ä Ï°∞Ìöå Ïã§Ìå®"))})}async removeUserComment(e){return this.db||await this.init(),new Promise((t,n)=>{const i=this.db.transaction([this.commentsStoreName],"readwrite").objectStore(this.commentsStoreName).delete(e);i.onsuccess=()=>t(!0),i.onerror=()=>n(new Error("ÏÇ¨Ïö©Ïûê ÎåìÍ∏Ä ÏÇ≠Ï†ú Ïã§Ìå®"))})}isUserLoggedIn(){return"object"==typeof s&&null!==s&&"function"==typeof s.isLogin&&s.isLogin()}async ensureInitialized(){if(i&&this.db)return!0;try{return await this.init(),i=!0,"undefined"!=typeof window&&(i=!0),!0}catch(e){return i=!1,"undefined"!=typeof window&&(i=!1),!1}}async loadUserInteractions(){if(!this.isUserLoggedIn())return null;if(!await this.ensureInitialized())return null;try{const[e,t]=await Promise.all([this.getAllLikes(),this.getAllRatings()]),n=new Set;Array.isArray(e)&&e.forEach(e=>{e&&e.game_id&&n.add(e.game_id)});const i=new Map;return Array.isArray(t)&&t.forEach(e=>{e&&e.game_id&&"number"==typeof e.rating&&i.set(e.game_id,e.rating)}),{likedGameIds:n,ratingsMap:i}}catch(e){return null}}};!function(){"use strict";const e=["flit.games","www.flit.games"];if(window.MY_PATTERN1="sunset_bird_94!forest","file:"===window.location.protocol)return void(document.documentElement.innerHTML="");let t=window.location.hostname;function n(t){return e.some(e=>t===e||t.endsWith("."+e))}if(window.location.port&&(t+=":"+window.location.port),n(t)){if(window!==window.top)try{if(!n(window.parent.location.hostname+(window.parent.location.port?":"+window.parent.location.port:"")))return void(window.parent.location.href="https://flit.games")}catch(e){return void(window.parent.location.href="https://flit.games")}}else!function(){const e=window.location.pathname,t=window.location.search,n=window.location.hash;let i="";const a=e.indexOf("/games/");i=-1!==a?e.substring(a):"/";const s="https://flit.games"+i+t+n;window.location.replace(s)}()}();const s=new class{constructor(){this.init(),this.storageKey="user",this.load()}init(){this.idx=null,this.name=null,this.email=null,this.nickname=null,this.picture=null,this.level=1,this.score=0}set(e,t,n,s,o,r=1,c=0){this.idx=e,this.name=t,this.email=n,this.nickname=s,this.picture=o,this.level=r,this.score=c;const l=n||e;l&&(i?a.reinitialize(l).catch(e=>{}):(a.setDbName(l),a.init().then(()=>{i=!0}).catch(e=>{i=!1})))}get(){return{idx:this.idx,name:this.name,email:this.email,nickname:this.nickname,picture:this.picture,level:this.level,score:this.score}}isLogin(){return null!==this.email&&null!==this.name}load(){const e=localStorage.getItem(this.storageKey);if(e)try{const t=JSON.parse(e);this.set(t.idx||null,t.name,t.email,t.nickname,t.picture,t.level||1,t.score||0)}catch(e){localStorage.removeItem(this.storageKey),this.init()}}save(){localStorage.setItem(this.storageKey,JSON.stringify(this.get()))}logout(){void 0!==a&&a&&a.reinitialize(null).catch(e=>{}),this.init(),localStorage.removeItem(this.storageKey),"undefined"!=typeof google&&google.accounts&&google.accounts.id.disableAutoSelect();const e=document.querySelector(".user-menu"),t=document.getElementById("google-login-button");e&&(e.style.display="none"),t&&(t.style.display="block"),window.location.reload()}};class o{constructor(e){if(!e)return;this.sClientID="926501929839-htrnem71i17j105iub5agesekp94rn4i.apps.googleusercontent.com",this.loginButton=e,this.userMenu=document.querySelector(".user-menu"),this.userAvatar=document.querySelector(".user-avatar"),this.logoutItem=document.querySelector(".logout-item"),this.userButton=document.querySelector(".user-button"),this.userDropdown=document.querySelector(".user-dropdown"),this.isTestMode="undefined"!=typeof window&&"undefined"!=typeof isTestMode?Boolean(isTestMode):"localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname,this.nicknameModal=document.getElementById("nickname-modal"),this.nicknameInput=document.getElementById("nickname-input"),this.nicknameError=document.getElementById("nickname-error"),this.confirmNicknameBtn=document.getElementById("confirm-nickname"),this.cancelNicknameBtn=document.getElementById("cancel-nickname"),this.closeNicknameModalBtn=document.querySelector(".close-nickname-modal"),this.setupEventListeners();const t=this,n=()=>{if("undefined"!=typeof google&&google.accounts){const n="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname,i=this.isTestMode;google.accounts.id.initialize({client_id:t.sClientID,"data-context":"signin",callback:t.onGoogleSignIn.bind(t),auto_select:!n&&!i});let a,o=window.innerWidth<=900?"icon":"standard";google.accounts.id.renderButton(e,{theme:"outline",size:"large",type:o}),window.addEventListener("resize",()=>{clearTimeout(a),a=setTimeout(()=>{const a=window.innerWidth<=900?"icon":"standard";o!==a&&(o=a,e.innerHTML="",google.accounts.id.renderButton(e,{theme:"outline",size:"large",type:a}),(n||i)&&t.addTestOverlay(e))},250)}),(n||i)&&t.addTestOverlay(e),s&&s.isLogin()?t.updateUserMenu(s.get().picture):n||i||google.accounts.id.prompt()}else setTimeout(n,100)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n()}setupEventListeners(){this.confirmNicknameBtn&&this.confirmNicknameBtn.addEventListener("click",()=>this.handleNicknameConfirm()),this.cancelNicknameBtn&&this.cancelNicknameBtn.addEventListener("click",()=>this.hideNicknameModal()),this.closeNicknameModalBtn&&this.closeNicknameModalBtn.addEventListener("click",()=>this.hideNicknameModal()),this.nicknameInput&&this.nicknameInput.addEventListener("keypress",e=>{"Enter"===e.key&&this.handleNicknameConfirm()})}showNicknameModal(){this.nicknameModal&&(this.nicknameModal.classList.remove("hidden"),this.nicknameInput&&this.nicknameInput.focus())}hideNicknameModal(){this.nicknameModal&&(this.nicknameModal.classList.add("hidden"),this.nicknameInput&&(this.nicknameInput.value=""),this.nicknameError&&this.nicknameError.classList.add("hidden"))}showNicknameError(e){this.nicknameError&&(this.nicknameError.textContent=e,this.nicknameError.classList.remove("hidden"))}hideNicknameError(){this.nicknameError&&this.nicknameError.classList.add("hidden")}async checkNicknameDuplicate(e){try{const t=await fetch(`${API_BASE_URL}/api/users/check-nickname?nickname=${encodeURIComponent(e)}`);return(await t.json()).exists||!1}catch(e){return!1}}async handleNicknameConfirm(){const e=this.nicknameInput?this.nicknameInput.value.trim():"";if(!e)return void this.showNicknameError("ÎãâÎÑ§ÏûÑÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.");if(e.length<2||e.length>20)return void this.showNicknameError("ÎãâÎÑ§ÏûÑÏùÄ 2-20Ïûê ÏÇ¨Ïù¥Î°ú ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.");await this.checkNicknameDuplicate(e)?alert("Ïù¥ÎØ∏ ÏÇ¨Ïö© Ï§ëÏù∏ ÎãâÎÑ§ÏûÑÏûÖÎãàÎã§."):(this.hideNicknameError(),await this.completeRegistration(e))}async completeRegistration(e){try{if(!this.pendingUserData)return;if(!this.pendingGoogleResponse)throw new Error("Google authentication data is missing. Please try logging in again.");if(!(this.pendingUserData.name&&this.pendingUserData.id&&this.pendingUserData.email&&this.pendingUserData.picture))throw new Error("Incomplete user data. Please try logging in again.");const t=await fetch(`${API_BASE_URL}/api/users/post`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.pendingGoogleResponse.credential}`},credentials:"include",body:JSON.stringify({name:this.pendingUserData.name,id:this.pendingUserData.id,email:this.pendingUserData.email,picture:this.pendingUserData.picture,nickname:e})});if(!t.ok){const e=await t.json();throw new Error(e.message||"Registration failed")}const n=await t.json();if(!n.success)throw new Error("Registration failed");if(!n.user)throw new Error("Invalid API response format");n.token&&localStorage.setItem("auth_token",n.token),s.set(n.user.idx,this.pendingUserData.name,this.pendingUserData.email,e,this.pendingUserData.picture,n.user.level||1,0),s.save(),this.updateUserMenu(this.pendingUserData.picture),this.pendingGoogleResponse=null,this.pendingUserData=null,this.hideNicknameModal(),alert(`üéâ ÌôòÏòÅÌï©ÎãàÎã§, ${e}Îãò!\n\nflit.gamesÏóê ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Í∞ÄÏûÖÎêòÏóàÏäµÎãàÎã§.`),window.location.reload()}catch(e){const t=e.message||"Registration failed. Please try again.";t.includes("network")||t.includes("Network")||t.includes("fetch")||t.includes("Failed to fetch")||t.includes("server_error")||t.includes("Server error")?(this.hideNicknameModal(),alert(`Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§: ${t}\n\nÎã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.`)):alert(t)}}updateUserMenu(e){const t=document.getElementById("google-login-button"),n=document.querySelector(".user-menu"),i=document.querySelector(".user-avatar");t&&(t.style.display="none"),n&&(n.style.display="flex",i&&e&&(i.src=e,i.alt=s.get().nickname||s.get().name||"User"))}decodeJwtResponse(e){const t=e.split(".");if(3!==t.length)throw new Error("JWT format is invalid");return(e=>{const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=atob(t);return JSON.parse(n)})(t[1])}async handleTestLogin(){const e={email:"admin@localhost.com",name:"ÌÖåÏä§Ìä∏ Í¥ÄÎ¶¨Ïûê",id:"admin_user_1",picture:"https://example.com/admin-avatar.jpg",nickname:"admin"},t=`test_token_${Date.now()}`;try{await this.onSignIn(e,{credential:t,isTestLogin:!0},{allowRegistration:!1,onMissingUser:()=>{alert("ÌÖåÏä§Ìä∏ ÏÇ¨Ïö©ÏûêÍ∞Ä ÏóÜÏäµÎãàÎã§.\n\nÎ®ºÏ†Ä createTestUser.jsÎ•º Ïã§ÌñâÌïòÏó¨ ÌÖåÏä§Ìä∏ ÏÇ¨Ïö©ÏûêÎ•º ÏÉùÏÑ±Ìï¥Ï£ºÏÑ∏Ïöî.\n\nÏÉùÏÑ±Îêú ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥:\n- email: admin@localhost.com\n- nickname: admin")}})}catch(e){alert(`ÌÖåÏä§Ìä∏ Î°úÍ∑∏Ïù∏ Ïã§Ìå®: ${e.message}`)}}addTestOverlay(e){if(!this.isTestMode||!e)return;"static"===window.getComputedStyle(e).position&&(e.style.position="relative");let t=e.querySelector(".google-test-overlay");t||(t=document.createElement("div"),t.className="google-test-overlay",t.style.cssText="\n            position: absolute;\n            inset: 0;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            text-align: center;\n            background: rgba(0, 0, 0, 0.1);\n            color: #fff;\n            font-size: 0.95rem;\n            font-weight: 600;\n            border-radius: inherit;\n            cursor: pointer;\n            padding: 12px;\n            z-index: 10;\n        ",t.innerHTML='\n            <div>\n                <span style="font-size: 0.85rem; font-weight: 500;">ÌÖåÏä§Ìä∏ Í≥ÑÏ†ï</span>\n            </div>\n        ',t.addEventListener("click",async e=>{e.preventDefault(),e.stopPropagation(),t.style.pointerEvents="none",t.dataset.loading="true";const n=t.innerHTML;t.innerHTML="\n                <div>\n                    ÌÖåÏä§Ìä∏ Í≥ÑÏ†ï Î°úÍ∑∏Ïù∏ Ï§ë...\n                </div>\n            ";try{await this.handleTestLogin()}catch(e){}finally{t.style.pointerEvents="auto",delete t.dataset.loading,t.innerHTML=n}}),e.appendChild(t))}async onSignIn(e,t,n={}){const{allowRegistration:i=!0,onMissingUser:a}=n,o=t&&t.credential;if(!e||!e.email)throw new Error("Invalid user data received from authentication provider.");if(!o)throw new Error("Authentication credential is missing.");try{const n=await fetch(`${API_BASE_URL}/api/users/check-email?email=${encodeURIComponent(e.email)}`);if((await n.json()).exists){const t=await fetch(`${API_BASE_URL}/api/users/login`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},credentials:"include",body:JSON.stringify({email:e.email})});if(!t.ok){const e=await t.json();throw new Error(e.message||"Login failed")}const n=await t.json();if(!n.success)throw new Error("Login failed");n.token&&localStorage.setItem("auth_token",n.token),s.set(n.user.idx,n.user.name||e.name,n.user.email||e.email,n.user.nickname||e.nickname,n.user.picture||e.picture,n.user.level||1,0),s.save(),this.updateUserMenu(n.user.picture||e.picture),window.location.reload()}else{if(!i){if("function"!=typeof a)throw new Error("User not found and registration is not allowed.");return void a()}this.pendingGoogleResponse=t,this.pendingUserData={name:e.name||(e.given_name?e.given_name+" "+(e.family_name||""):""),id:e.sub||e.id,email:e.email,picture:e.picture},this.showNicknameModal()}}catch(e){if("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname||this.isTestMode)return;alert(e.message||"Login failed. Please try again.")}}onGoogleSignIn=async e=>{const t=this.decodeJwtResponse(e.credential);await this.onSignIn(t,e,{allowRegistration:!0})}}document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("google-login-button");if(e){new o(e)}});class r{constructor(){this.menuElement=null,this.isOpen=!1,this.boundHandleOutsideClick=this.handleOutsideClick.bind(this),this.boundHandleEscape=this.handleEscape.bind(this),this.initStyles(),this.createMenuContainer()}createMenuContainer(){this.menuElement=document.createElement("div"),this.menuElement.className="popup-menu",document.body.appendChild(this.menuElement)}addMenu(e){e instanceof HTMLElement&&this.menuElement.appendChild(e)}show(e,t){this.isOpen||(this.isOpen=!0,e&&this.positionMenu(e,t),this.menuElement.classList.add("show"),setTimeout(()=>{document.addEventListener("click",this.boundHandleOutsideClick),document.addEventListener("keydown",this.boundHandleEscape)},0))}positionMenu(e,t){if(!e)return;const n=e.getBoundingClientRect(),i=this.menuElement.getBoundingClientRect(),a=window.innerWidth,s=window.innerHeight,o=i.height||200,r=i.width||180,c=n.top,l=s-n.bottom;let d,m,u="below";"boolean"==typeof t?(u=t?"below":"above","below"===u?(d=n.bottom+12,d+o>s-16&&(d=Math.min(d,s-o-16))):(d=n.top-o-12,d<16&&(d=Math.max(d,16)))):c>=o+12||c>l?(u="above",d=n.top-o-12,d<16&&(u="below",d=n.bottom+12)):(d=n.bottom+12,d+o>s-16&&(u="above",d=n.top-o-12,d<16&&(d=16,u="below"))),m=n.left+n.width/2-r/2;const h=a-r-16;m=Math.max(16,Math.min(m,h)),this.menuElement.style.top=`${d}px`,this.menuElement.style.left=`${m}px`,this.menuElement.classList.remove("above","below"),this.menuElement.classList.add(u)}hide(){this.isOpen&&(this.isOpen=!1,this.menuElement.classList.remove("show"),document.removeEventListener("click",this.boundHandleOutsideClick),document.removeEventListener("keydown",this.boundHandleEscape))}toggle(){this.isOpen?this.hide():this.show()}handleOutsideClick(e){this.menuElement.contains(e.target)||this.hide()}handleEscape(e){"Escape"===e.key&&this.hide()}initStyles(){const t="popup-menu-styles";if(document.getElementById(t))return;const n="\n            /* Popup Menu Base Styles - Same for all popups */\n            .popup-menu {\n                position: fixed;\n                z-index: 10000;\n                background: #f4c153;\n                border: 1px solid #a64a1f;\n                border-radius: 12px;\n                box-shadow: 0 8px 20px rgba(0,0,0,0.15);\n                opacity: 0;\n                pointer-events: none;\n                transition: opacity 0.2s ease, transform 0.2s ease;\n                transform: translateY(-8px);\n                will-change: top, left, transform;\n            }\n\n            .popup-menu.show {\n                opacity: 1;\n                pointer-events: auto;\n                transform: translateY(0);\n            }\n        ";e(t,n)}}class c extends r{constructor(){super(),this.currentCommentId=null,this.canRemove=!1,this.canEdit=!1,this.handlers={onReport:null,onRemove:null,onEdit:null},this.menuElement&&(this.menuElement.classList.add("comments-popup-menu"),this.menuElement.setAttribute("role","menu")),this.ensureStyles()}setHandlers(e={}){e&&"object"==typeof e&&("function"==typeof e.onReport&&(this.handlers.onReport=e.onReport),"function"==typeof e.onRemove&&(this.handlers.onRemove=e.onRemove),"function"==typeof e.onEdit&&(this.handlers.onEdit=e.onEdit))}showForComment(e,t){e&&void 0!==e.commentId&&(this.currentCommentId=Number(e.commentId),this.canRemove=!!e.canRemove,this.canEdit=!!e.canEdit,this.renderMenuItems(),this.show(t))}renderMenuItems(){if(!this.menuElement)return;this.menuElement.innerHTML="";const e=this.createMenuItem({icon:"üö©",label:"Ïã†Í≥†ÌïòÍ∏∞",action:()=>this.handleReport()});if(this.menuElement.appendChild(e),this.canEdit){const e=this.createMenuItem({icon:"‚úèÔ∏è",label:"Ìé∏ÏßëÌïòÍ∏∞",action:()=>this.handleEdit()});this.menuElement.appendChild(e)}if(this.canRemove){const e=this.createMenuItem({icon:"üóëÔ∏è",label:"ÏÇ≠Ï†úÌïòÍ∏∞",action:()=>this.handleRemove()});this.menuElement.appendChild(e)}}createMenuItem({icon:e,label:t,action:n}){const i=document.createElement("button");i.type="button",i.className="comments-popup-item",i.setAttribute("role","menuitem");const a=document.createElement("span");a.className="comments-popup-item-icon",a.textContent=e||"";const s=document.createElement("span");return s.className="comments-popup-item-label",s.textContent=t||"",i.appendChild(a),i.appendChild(s),i.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),"function"==typeof n&&n()}),i.addEventListener("mouseenter",()=>{i.classList.add("hover")}),i.addEventListener("mouseleave",()=>{i.classList.remove("hover")}),i}handleReport(){"function"==typeof this.handlers.onReport&&Number.isFinite(this.currentCommentId)&&this.handlers.onReport(this.currentCommentId),this.hide()}handleRemove(){this.canRemove?("function"==typeof this.handlers.onRemove&&Number.isFinite(this.currentCommentId)&&this.handlers.onRemove(this.currentCommentId),this.hide()):this.hide()}handleEdit(){this.canEdit?("function"==typeof this.handlers.onEdit&&Number.isFinite(this.currentCommentId)&&this.handlers.onEdit(this.currentCommentId),this.hide()):this.hide()}ensureStyles(){const t="comments-popup-menu-styles";if(document.getElementById(t))return;const n="\n            .comments-popup-menu {\n                min-width: 180px;\n                padding: 8px 0;\n                display: flex;\n                flex-direction: column;\n                gap: 4px;\n            }\n\n            .comments-popup-item {\n                display: flex;\n                align-items: center;\n                gap: 10px;\n                width: 100%;\n                padding: 10px 18px;\n                background: transparent;\n                border: none;\n                text-align: left;\n                font-size: 14px;\n                color: #2f1900;\n                cursor: pointer;\n                border-radius: 10px;\n            }\n\n            .comments-popup-item-icon {\n                font-size: 16px;\n                flex: 0 0 auto;\n            }\n\n            .comments-popup-item-label {\n                flex: 1;\n                font-weight: 500;\n            }\n\n            .comments-popup-item.hover,\n            .comments-popup-item:focus-visible {\n                background: rgba(0, 0, 0, 0.08);\n                outline: none;\n            }\n        ";e(t,n)}}let l=new c;const d={en:"English",ko:"ÌïúÍµ≠Ïñ¥",ja:"Êó•Êú¨Ë™û"};function m(e){if(!e)return;let t=[];const n=e.dataset?.availableLangs?e.dataset.availableLangs.split(",").map(e=>e.trim()).filter(Boolean):[];n.length?t=n:"undefined"!=typeof AVAILABLE_LANGS&&Array.isArray(AVAILABLE_LANGS)&&(t=AVAILABLE_LANGS.filter(Boolean)),t.length||(t=["en","ko","ja"]),t.includes("en")||t.unshift("en");const i=Array.from(new Set(t));let a=e.dataset?.currentLang||("undefined"!=typeof CURRENT_LANG&&CURRENT_LANG?CURRENT_LANG:"en");if(!e.dataset?.currentLang){const e=window.location.pathname.split("/").filter(Boolean).find(e=>i.includes(e));e&&(a=e)}e.innerHTML=i.map(e=>{const t=d[e]||e.toUpperCase();return`<option value="${e}"${e===a?" selected":""}>${t}</option>`}).join(""),i.includes(a)&&(e.value=a);const s=e.dataset?.rootPath||("undefined"!=typeof ROOT_PATH?ROOT_PATH:""),o=e.cloneNode(!0);e.parentNode.replaceChild(o,e),o.addEventListener("change",e=>{const t=e.target.value||"en",n="undefined"!=typeof isTestMode&&isTestMode?"index.html":"index";let i;i=t&&"en"!==t?s?`${s}/${t}/${n}`:`/${t}/${n}`:s?`${s}/${n}`:`/${n}`,window.location.href=i}),o.addEventListener("mousedown",e=>e.stopPropagation()),o.addEventListener("touchstart",e=>e.stopPropagation()),o.addEventListener("click",e=>e.stopPropagation())}new class extends r{constructor(){super(),this.triggerButton=null,this.initialized=!1,this.createUserDropdown(),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>this.init()):this.init()}createUserDropdown(){const e=document.createElement("div");e.className="user-dropdown-item",e.id="userInfo",e.innerHTML='\n            <div style="display: flex; align-items: center; gap: 10px;">\n                <img id="userInfoAvatar" src="" alt="User" style="width: 32px; height: 32px; border-radius: 50%; object-fit: cover;">\n                <div>\n                    <div id="userInfoNickname" style="font-weight: 600; font-size: 14px;"></div>\n                    <div id="userInfoEmail" style="font-size: 12px; opacity: 0.7;"></div>\n                </div>\n            </div>\n        ';const t=document.createElement("div");t.className="user-dropdown-item language-select-item";let n=[];"undefined"!=typeof AVAILABLE_LANGS&&Array.isArray(AVAILABLE_LANGS)&&(n=AVAILABLE_LANGS.filter(Boolean)),n.length||(n=["en","ko","ja"]),n.includes("en")||n.unshift("en");const i=Array.from(new Set(n));let a="en";const o=window.location.pathname.split("/").filter(Boolean).find(e=>i.includes(e));o?a=o:"undefined"!=typeof CURRENT_LANG&&CURRENT_LANG&&(a=CURRENT_LANG);const r=document.createElement("select");r.id="languageSelect",r.style.cssText="width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px; background: white; cursor: pointer;",r.setAttribute("data-current-lang",a),n.length&&r.setAttribute("data-available-langs",i.join(",")),i.forEach(e=>{const t=document.createElement("option");t.value=e,t.textContent=d[e]||e.toUpperCase(),e===a&&(t.selected=!0),r.appendChild(t)}),t.appendChild(r);const c=document.createElement("div");c.className="user-dropdown-item logout",c.textContent="Î°úÍ∑∏ÏïÑÏõÉ",c.style.cursor="pointer",c.addEventListener("click",()=>{s.logout()}),this.addMenu(e),this.addMenu(t),this.addMenu(c)}init(){if(this.initialized)return;const e=document.getElementById("userButton");e&&(this.triggerButton=e,e.addEventListener("click",t=>{t.stopPropagation(),this.isOpen?this.hide():this.show(e)}),this.initialized=!0,this.updateUserInfo(),this.initLanguageSelector())}initLanguageSelector(){const e=this.menuElement?this.menuElement.querySelector("#languageSelect"):null;e?m(e):setTimeout(()=>this.initLanguageSelector(),100)}updateUserInfo(){if(void 0===s||!s||!s.isLogin())return;const e=s.get(),t=document.getElementById("userInfoAvatar"),n=document.getElementById("userInfoNickname"),i=document.getElementById("userInfoEmail");t&&e.picture&&(t.src=e.picture),n&&e.nickname&&(n.textContent=e.nickname),i&&e.email&&(i.textContent=e.email)}show(e){this.isOpen||(this.updateUserInfo(),super.show(e||this.triggerButton))}};let u=new class extends r{constructor(){super(),this.isFavorite=!1,this.triggerButton=null}attachButton(e){e&&(this.triggerButton=e,e.addEventListener("click",t=>{t.stopPropagation(),this.isOpen?this.hide():this.show(e)}))}show(e){const t=void 0!==L&&L?!!L.isFavorite:this.isFavorite;this.createFavoriteMenuItem(t),super.show(e,!0)}createFavoriteMenuItem(e){this.isFavorite=e,this.menuElement.innerHTML="";const t=document.createElement("div");t.style.cssText="display: flex; align-items: center; gap: 12px; padding: 12px 16px; cursor: pointer; border-radius: 8px;";const n=document.createElement("span");n.textContent=e?"üóëÔ∏è":"üéØ",n.style.fontSize="18px";const i=document.createElement("span");i.textContent=e?"Ï¶êÍ≤®Ï∞æÍ∏∞ Ï†úÍ±∞":"Ï¶êÍ≤®Ï∞æÍ∏∞ Ï∂îÍ∞Ä",i.style.fontSize="14px",i.style.fontWeight="500",i.style.color="#333",t.appendChild(n),t.appendChild(i),t.addEventListener("click",async()=>{const e=!this.isFavorite;this.isFavorite=e,this.hide(),L.toggleFavorite(e).catch(e=>{})}),t.addEventListener("mouseenter",()=>{t.style.background="rgba(0, 0, 0, 0.05)"}),t.addEventListener("mouseleave",()=>{t.style.background="transparent"}),this.addMenu(t)}};let h=new class extends r{constructor(){super(),this.triggerButton=null,this.initialized=!1,this.pendingRating=null,this.boundHandleResize=this.handleResize.bind(this),this.boundHandleScroll=this.handleScroll.bind(this),this.createRatingPopup(),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>this.init()):this.init()}createRatingPopup(){const e=document.createElement("div");e.className="rating-popup-content",e.style.cssText="padding: 14px;",e.innerHTML='\n            <div class="rating-popup-title" style="padding:10px">Î≥ÑÏ†êÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</div>\n            <div class="rating-popup-row" style="padding:10px;display:flex;align-items:center;gap:6px;">\n                <div class="rating-popup-stars" id="ratingPopupStars"></div>\n                <button class="rating-confirm-button" id="ratingConfirmButton" type="button" disabled style="padding: 4px;">ÌôïÏù∏</button>\n            </div>\n        ',this.addMenu(e)}init(){if(this.initialized)return;const e=document.getElementById("ratingButton");e&&(this.triggerButton=e,e.addEventListener("click",t=>{t.stopPropagation(),this.isOpen?this.hide():this.show(e)}),this.initialized=!0)}show(e){this.resetPendingRating(),super.show(e||this.triggerButton),this.updateRatingUI(),window.addEventListener("resize",this.boundHandleResize),window.addEventListener("scroll",this.boundHandleScroll,!0)}hide(){super.hide(),this.resetPendingRating(),window.removeEventListener("resize",this.boundHandleResize),window.removeEventListener("scroll",this.boundHandleScroll,!0)}bindGameAPIHelpers(){L._starsPopupBindingsApplied||(L.updateRatingUI=()=>this.updateRatingUI(),L.attachRatingClickHandlers=()=>this.attachRatingClickHandlers(),L.resetPendingRating=()=>this.resetPendingRating(),L.updateConfirmButtonState=e=>this.updateConfirmButtonState(e),L._starsPopupBindingsApplied=!0)}updateRatingUI(){this.bindGameAPIHelpers();const e=document.getElementById("gameRatingOverall"),t=document.getElementById("gameRating"),n=document.getElementById("ratingButton"),i=document.getElementById("ratingButtonText"),a=document.getElementById("ratingPopupStars"),o=document.getElementById("gameViews"),r=document.getElementById("gameViewsCount");if(!(e||t||o||r))return;if(!document.getElementById("playerContainer"))return;const c=void 0!==L&&L&&L.baseStats?L.baseStats:{ratingAvg:0,ratingCount:0,viewCount:0},l=c.ratingAvg||0,d=c.ratingCount||0,m=c.viewCount||0;let u=d,h=l;if(e){const t=L.userRating||0;if(!!L.userRating){u+=1;h=u>0?(d*l+t)/u:t}b.renderStars(e,h);let n=e.querySelector(".rating-count");n||(n=document.createElement("span"),n.className="rating-count",e.appendChild(n)),n.textContent=`(${u})`,e.classList.add("readonly")}r&&(r.textContent=k(m)),o&&o.setAttribute("title",`${m.toLocaleString("ko-KR")} plays`);const g=s&&s.isLogin(),p=L.userRating||0,y=!!L.userRating,f="number"==typeof this.pendingRating&&!Number.isNaN(this.pendingRating),w=f?this.pendingRating:p,v=f?this.pendingRating:y?p:null;n&&(n.disabled=!g,n.classList.toggle("disabled",!g),n.setAttribute("aria-disabled",(!g).toString()),n.setAttribute("title",g?"Î≥ÑÏ†êÏùÑ ÎÇ®Í≤®Î≥¥ÏÑ∏Ïöî":"Î°úÍ∑∏Ïù∏Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§.")),i&&(i.textContent=g?y?`ÎÇòÏùò ÌèâÏ†ê ${p.toFixed(1)}Ï†ê`:"Î≥ÑÏ†ê Ï£ºÍ∏∞":"Î°úÍ∑∏Ïù∏ ÌïÑÏöî"),a&&b.renderStars(a,w,v,{starSize:"2.4rem"}),t&&t.classList.toggle("readonly",!g),!g&&this.isOpen&&this.hide(),this.updateConfirmButtonState(g),g?this.attachRatingClickHandlers():this.resetPendingRating()}attachRatingClickHandlers(){const e=document.getElementById("ratingPopupStars"),t=document.getElementById("ratingConfirmButton");if(!e||!t)return;const n=e.querySelectorAll(".star");n.forEach((e,t)=>{e.onclick=n=>{n.stopPropagation();const i=((e,t,n)=>{const i=parseInt(t.getAttribute("data-value"),10),a=Number.isFinite(i)?i:n+1,s=t.getBoundingClientRect(),o=("number"==typeof e.clientX?e.clientX:e.touches&&e.touches[0]?e.touches[0].clientX:s.left+s.width)-s.left,r=s.width>0&&o<s.width/2?Math.max(.5,a-.5):a;return Math.min(r,5)})(n,e,t);this.pendingRating=i,this.updateRatingUI()}}),t.onclick=async e=>{if(e.stopPropagation(),t.disabled)return;const n=this.pendingRating;"number"!=typeof n||Number.isNaN(n)||(t.disabled=!0,this.pendingRating=null,this.hide(),L.setRating(n).catch(e=>{}))}}resetPendingRating(){this.pendingRating=null,this.updateConfirmButtonState()}updateConfirmButtonState(e=s&&s.isLogin()){const t=document.getElementById("ratingConfirmButton");if(!t)return;const n=Boolean(e)&&"number"==typeof this.pendingRating&&!Number.isNaN(this.pendingRating);t.disabled=!n}handleResize(){this.isOpen&&this.triggerButton&&this.positionMenu(this.triggerButton)}handleScroll(){this.isOpen&&this.triggerButton&&this.positionMenu(this.triggerButton)}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>h.bindGameAPIHelpers()):h.bindGameAPIHelpers();const g="star",p="star-filled",y="star-half",f="star-empty",w="user-rated";class v{constructor(){this.initStyles()}initStyles(){e("stars-style",`\n.${g} {\n  display: inline-block;\n  font-size: 1rem;\n  line-height: 1;\n  color: #00000022;\n  transition: transform 0.2s ease;\n}\n.${p} {\n  color: #a3491e;\n}\n.${y} {\n  background: linear-gradient(to right, #a3491e 50%, #00000022 50%);\n  -webkit-background-clip: text;\n  background-clip: text;\n  -webkit-text-fill-color: transparent;\n  position: relative;\n}\n.${f} {\n  color: #00000022;\n}\n.${g}.${w} {\n  color: #a3491e;\n}\n`)}static clamp(e,t,n){return Number.isNaN(e)?t:Math.min(Math.max(e,t),n)}static resolveContainer(e){return e?"string"==typeof e?"undefined"==typeof document?null:document.querySelector(e):"object"==typeof e&&"innerHTML"in e?e:null:null}createStarHtml(e,t,n){const i=[g,e];return n&&i.push(w),`<span class="${i.join(" ")}" data-value="${t}">‚òÖ</span>`}addFullStar(e,t,n){e.push(this.createStarHtml(p,t,n))}addHalfStar(e,t,n){e.push(this.createStarHtml(y,t,n))}addEmptyStar(e,t,n){e.push(this.createStarHtml(f,t,n))}buildStarsHTML(e=0,t=null){const n=v.clamp(Number(e)||0,0,5),i=null==t?null:v.clamp(Number(t)||0,0,5),a=[];let s=1;const o=Math.floor(n);for(let e=0;e<o&&s<=5;e+=1){const e=null!==i&&i>=s;this.addFullStar(a,s,e),s+=1}if(n%1>=.5&&s<=5){const e=null!==i&&i>=s;this.addHalfStar(a,s,e),s+=1}for(;s<=5;){const e=null!==i&&i>=s;this.addEmptyStar(a,s,e),s+=1}return a.join("")}renderStars(e,t=0,n=null,i=void 0){const a=this.buildStarsHTML(t,n),s=v.resolveContainer(e);if(s){s.innerHTML=a;const e=i||{};if(e.containerClass&&(Array.isArray(e.containerClass)?s.classList.add(...e.containerClass.filter(Boolean)):"string"==typeof e.containerClass&&s.classList.add(e.containerClass)),e.starClass||e.starSize){s.querySelectorAll(`.${g}`).forEach(t=>{e.starClass&&(Array.isArray(e.starClass)?t.classList.add(...e.starClass.filter(Boolean)):"string"==typeof e.starClass&&t.classList.add(e.starClass)),e.starSize&&("number"==typeof e.starSize?t.style.fontSize=`${e.starSize}rem`:"string"==typeof e.starSize&&(t.style.fontSize=e.starSize))})}}return a}}const b=new v;const E=new class{constructor(){this.rufflePlayer=null}getPlayer(){return this.rufflePlayer||(this.rufflePlayer=document.getElementById("rufflePlayer")),this.rufflePlayer}load(e){const t=document.querySelector(".player");if(!t)return;const n=document.getElementById("gameFrame");n&&n.remove();const i=document.getElementById("rufflePlayer");if(i&&i.remove(),this.rufflePlayer=null,window.RufflePlayer&&"function"==typeof window.RufflePlayer.newest)try{const n=window.RufflePlayer.newest().createPlayer();n.id="rufflePlayer",n.style.width="100%",n.style.height="100%",n.style.minHeight="400px",n.style.display="block",n.tabIndex=0,t.appendChild(n),this.rufflePlayer=n,n.load({url:e}).catch(e=>{alert("Flash Í≤åÏûÑÏùÑ Î°úÎìúÌï† Ïàò ÏóÜÏäµÎãàÎã§.")})}catch(e){alert("Flash Í≤åÏûÑ ÌîåÎ†àÏù¥Ïñ¥Î•º ÏÉùÏÑ±Ìï† Ïàò ÏóÜÏäµÎãàÎã§.")}else{const n=document.createElement("ruffle-player");n.id="rufflePlayer",n.style.width="100%",n.style.height="100%",n.style.minHeight="400px",n.style.display="block",n.tabIndex=0,n.src=e,t.appendChild(n),this.rufflePlayer=n}}focus(){const e=this.getPlayer();e&&e.focus()}setFullscreen(e){const t=this.getPlayer();t&&"function"==typeof t.setFullscreen&&t.setFullscreen(e)}pause(){const e=this.getPlayer();e&&"function"==typeof e.pause&&e.pause()}play(){const e=this.getPlayer();e&&"function"==typeof e.play&&e.play()}isLoaded(){return!!this.getPlayer()}};const S=new class{constructor(){this.isGameStarted=!1,this.isGamePaused=!1,this.isFullscreen=!1,this.isMobileFullMode=!1,this.gameResolution="",this.gameWidth=0,this.gameHeight=0,this.gameFrame=null,this.gameData={},this.currentViewMode="normal",this.keyboardHandlersBound=!1,this.originalBodyOverflow=null,this.originalTopSectionHeight=null,this.originalTopToolbarDisplay=null,this.originalGameFrameSrc=null,this.startGame=this.startGame.bind(this),this.toggleViewMode=this.toggleViewMode.bind(this),this.handleFullscreenChange=this.handleFullscreenChange.bind(this),document.addEventListener("fullscreenchange",this.handleFullscreenChange)}parseGameResolution(e){if(!e)return{width:0,height:0};const t=e.split("x");return 2!==t.length?{width:0,height:0}:{width:parseInt(t[0],10)||0,height:parseInt(t[1],10)||0}}isMobileSize(){return window.innerWidth<=900}createPlayerContainer(){const e=document.getElementById("playerContainer");if(!e)return;const t=e.getAttribute("data-left-keys"),n=e.getAttribute("data-right-keys"),i=t?JSON.parse(t):[],a=n?JSON.parse(n):[],s="true"===e.getAttribute("data-is-flash-game"),o=e.getAttribute("data-game-url");this.gameData={thumbnail:e.getAttribute("data-thumbnail"),name:e.getAttribute("data-name"),gameUrl:o,resolution:e.getAttribute("data-resolution"),isFlashGame:s,leftKeys:i,rightKeys:a},window.gameData=this.gameData,this.gameResolution=this.gameData.resolution;const r=this.parseGameResolution(this.gameData.resolution);this.gameWidth=r.width,this.gameHeight=r.height,e.innerHTML='\n        <div class="player-with-controls">\n            <div class="player">\n                <div class="thumbnail" id="thumbnail">\n                    <img id="thumbnailImg" alt="">\n                    <button class="playButton" id="playButton"></button>\n                </div>\n                <iframe id="gameFrame"></iframe>\n            </div>\n        </div>\n         <div class="controls" id="controls">\n             <div class="controls-top">\n                 <button class="control-button pause" id="pauseBtn" title="ÏùºÏãúÏ†ïÏßÄ"></button>\n             </div>\n             <div class="controls-bottom">\n                 <button class="control-button narrow" id="normalBtn" title="Toggle View"></button>\n                 <button class="control-button fullscreen" id="fullscreenBtn" title="Full Screen"></button>\n             </div>\n         </div>\n    ';const c=document.getElementById("thumbnailImg");c&&(c.src=this.gameData.thumbnail,c.alt=this.gameData.name),this.gameFrame=document.getElementById("gameFrame"),this.gameFrame&&(this.gameFrame.dataset.gameUrl=this.gameData.gameUrl,this.gameFrame.addEventListener("load",()=>this.onGameLoad()));const l=document.getElementById("playButton");l&&l.addEventListener("click",this.startGame);const d=document.getElementById("normalBtn");d&&d.addEventListener("click",this.toggleViewMode);const m=document.getElementById("fullscreenBtn");m&&m.addEventListener("click",()=>this.setViewMode("fullscreen"));const u=document.getElementById("pauseBtn");u&&u.addEventListener("click",()=>this.togglePause()),this.setupKeyboardEventHandlers()}startGame(){if(this.isGamePaused&&this.isGameStarted)return void this.resumeGame();if(this.isGameStarted)return;if(this.gameData.isFlashGame&&this.gameData.gameUrl)return void this.startFlashGame();const e=document.getElementById("thumbnail");document.getElementById("controls");L.incrementView(),e&&e.classList.add("hidden"),this.gameFrame&&(this.gameFrame.classList.add("active"),this.gameFrame.src=this.originalGameFrameSrc||this.gameData.gameUrl,this.originalGameFrameSrc=this.gameFrame.src);const n=this.gameData.leftKeys&&this.gameData.leftKeys.length>0||this.gameData.rightKeys&&this.gameData.rightKeys.length>0;void 0!==t&&t()&&n&&I(),this.isGameStarted=!0,this.updatePauseButton(),void 0!==t&&t()&&(this.isMobileFullMode||this.mobileFullMode(!0))}async startFlashGame(){if(this.isGamePaused&&this.isGameStarted)return void this.resumeGame();if(this.isGameStarted)return;const e=document.getElementById("thumbnail");document.querySelector(".player");if(L.incrementView(),e&&e.classList.add("hidden"),void 0===window.RufflePlayer){const e=document.createElement("script");e.src="https://cdnjs.cloudflare.com/ajax/libs/ruffle-rs/0.2.0-nightly.2025.9.29/ruffle.min.js",e.onload=()=>{setTimeout(()=>{this.loadFlashGame()},100)},e.onerror=()=>{alert("Flash Í≤åÏûÑÏùÑ Î°úÎìúÌï† Ïàò ÏóÜÏäµÎãàÎã§. ruffle.jsÎ•º Î∂àÎü¨Ïò§ÎäîÎç∞ Ïã§Ìå®ÌñàÏäµÎãàÎã§.")},document.head.appendChild(e)}else this.loadFlashGame()}loadFlashGame(){E.load(this.gameData.gameUrl),this.isGameStarted=!0,this.updatePauseButton();const e=this.gameData.leftKeys&&this.gameData.leftKeys.length>0||this.gameData.rightKeys&&this.gameData.rightKeys.length>0;void 0!==t&&t()&&e&&I(),void 0!==t&&t()&&(this.isMobileFullMode||this.mobileFullMode(!0))}togglePause(){this.isGameStarted&&(this.isGamePaused?this.resumeGame():this.pauseGame())}pauseGame(){if(this.isGameStarted&&!this.isGamePaused){if(this.gameData.isFlashGame)return E.pause(),this.isGamePaused=!0,void this.updatePauseButton();if(this.gameFrame){try{this.gameFrame.contentWindow&&this.gameFrame.contentWindow.postMessage({type:"pause"},"*")}catch(e){}this.gameFrame.src&&"about:blank"!==this.gameFrame.src&&(this.originalGameFrameSrc=this.gameFrame.src,this.gameFrame.src="about:blank"),this.isGameStarted=!1,this.isGamePaused=!1;const e=document.getElementById("thumbnail");e&&e.classList.remove("hidden"),this.gameFrame&&this.gameFrame.classList.remove("active"),this.updatePauseButton()}}}resumeGame(){if(this.isGamePaused||!this.isGameStarted)return this.gameData.isFlashGame?(E.play(),this.isGamePaused=!1,void this.updatePauseButton()):void 0}updatePauseButton(){const e=document.getElementById("pauseBtn");e&&(this.isGameStarted?(e.style.display="flex",this.gameData.isFlashGame?this.isGamePaused?(e.classList.remove("pause"),e.classList.add("resume"),e.title="Ïû¨Í∞ú"):(e.classList.remove("resume"),e.classList.add("pause"),e.title="ÏùºÏãúÏ†ïÏßÄ"):(e.classList.remove("resume"),e.classList.add("stop"),e.title="Ï§ëÏßÄ")):e.style.display="none")}onGameLoad(){}focusIframe(){if(this.gameFrame&&this.gameFrame.contentWindow)try{if(this.gameFrame.contentWindow.focus(),this.gameFrame.contentDocument){const e=this.gameFrame.contentDocument.body;if(e){const t=e.querySelector('input, textarea, button, [tabindex]:not([tabindex="-1"])');t?t.focus():e.focus()}}}catch(e){this.gameFrame.hasAttribute("tabindex")||this.gameFrame.setAttribute("tabindex","-1"),this.gameFrame.focus()}}focusGame(){if(!this.isGameStarted)return;const e=document.activeElement;e&&"BUTTON"===e.tagName&&e.blur(),E.isLoaded()?E.focus():this.gameFrame&&this.focusIframe()}setupKeyboardEventHandlers(){this.keyboardHandlersBound||(this.keyboardHandlersBound=!0,window.addEventListener("keydown",e=>{if(this.isGameStarted&&this.gameFrame&&this.gameFrame.contentWindow)try{this.gameFrame.contentWindow.postMessage({type:"keydown",key:e.key,code:e.code,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey},"*")}catch(e){}this.isGameStarted&&this.gameFrame&&this.gameFrame.focus()}),window.addEventListener("keyup",e=>{if(this.isGameStarted&&this.gameFrame&&this.gameFrame.contentWindow)try{this.gameFrame.contentWindow.postMessage({type:"keyup",key:e.key,code:e.code,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey},"*")}catch(e){}}))}toggleViewMode(){"normal"===this.currentViewMode?this.setViewMode("wide"):this.setViewMode("normal")}setViewMode(e){const n=document.querySelector(".gameinfoContainer"),i=document.querySelector(".top-section"),a=document.querySelector(".player"),s=document.getElementById("fullscreenBtn"),o=document.getElementById("normalBtn");if(n&&i&&a&&s&&o){switch(this.currentViewMode=e,e){case"normal":n.style.display="block",o.classList.remove("narrow"),o.classList.add("wide");break;case"wide":if(this.isMobileSize())return void this.setViewMode("normal");n.style.display="none",o.classList.remove("wide"),o.classList.add("narrow");break;case"fullscreen":if(void 0!==t&&t())return void(this.isMobileFullMode?this.mobileFullMode(!1):this.mobileFullMode(!0));if(this.isFullscreen)return document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),this.isFullscreen=!1,void(s.title="Full Screen");a.requestFullscreen?a.requestFullscreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.msRequestFullscreen&&a.msRequestFullscreen(),this.isFullscreen=!0,s.title="Ï†ÑÏ≤¥ÌôîÎ©¥ Ï¢ÖÎ£å";break;default:return}this.isGameStarted&&this.gameFrame&&this.gameFrame.contentWindow&&setTimeout(()=>{try{this.gameFrame.contentWindow.postMessage({type:"resize",width:this.gameFrame.offsetWidth,height:this.gameFrame.offsetHeight},"*")}catch(e){}},100),this.isGameStarted&&setTimeout(()=>{this.focusGame()},50)}}handleFullscreenChange(){if(!document.fullscreenElement){this.isFullscreen=!1;const e=document.getElementById("fullscreenBtn"),t=document.getElementById("minimizeBtn");e&&(e.style.display="flex"),t&&(t.style.display="none")}}mobileFullMode(e){const t=document.querySelector(".top-section"),n=document.querySelector(".gameinfoContainer"),i=document.querySelector(".bottom-section"),a=document.querySelector(".playerContainer"),s=document.querySelector(".virtual-keyboard-wrapper"),o=document.querySelector(".page-toolbar"),r=document.getElementById("fullscreenBtn"),c=document.body,l=document.documentElement;if(t&&a){if(e){this.isMobileFullMode=!0,this.originalBodyOverflow=c.style.overflow,this.originalTopSectionHeight=t.style.height,this.originalTopToolbarDisplay=o?o.style.display:null,c.style.overflow="hidden",l.style.overflow="hidden",o&&(o.style.display="none");const e=this.gameData&&(this.gameData.leftKeys&&this.gameData.leftKeys.length>0||this.gameData.rightKeys&&this.gameData.rightKeys.length>0),d=e?200:0,m=this.isMobileSize()?60:0;t.style.height=d>0?`calc(100vh - ${d}px - ${m}px)`:`calc(100vh - ${m}px)`,t.style.padding="0",t.style.gap="0",n&&(n.style.display="none"),i&&(i.style.display="none"),a.style.flex="1",a.style.height="100%",a.style.minHeight="0";const u=a.querySelector(".player");u&&(u.style.height="100%",u.style.minHeight="0",u.style.maxHeight="none"),e&&s&&I(),r&&(r.title="Ï†ÑÏ≤¥Î™®Îìú Ï¢ÖÎ£å")}else{this.isMobileFullMode=!1,null!==this.originalBodyOverflow?c.style.overflow=this.originalBodyOverflow:c.style.overflow="",l.style.overflow="",null!==this.originalTopSectionHeight?t.style.height=this.originalTopSectionHeight:t.style.height="",t.style.padding="",t.style.gap="",n&&(n.style.display=""),i&&(i.style.display="");const e=document.querySelector(".page-toolbar");e&&(null!==this.originalTopToolbarDisplay?e.style.display=this.originalTopToolbarDisplay:e.style.display=""),a.style.flex="",a.style.height="",a.style.minHeight="";const s=a.querySelector(".player");s&&(s.style.height="",s.style.minHeight="",s.style.maxHeight=""),B(),r&&(r.title="Full Screen")}this.isGameStarted&&this.gameFrame&&this.gameFrame.contentWindow&&setTimeout(()=>{try{this.gameFrame.contentWindow.postMessage({type:"resize",width:this.gameFrame.offsetWidth,height:this.gameFrame.offsetHeight},"*")}catch(e){}},100),this.isGameStarted&&setTimeout(()=>{this.focusGame()},50)}}browserResized(e,t,n){const i=window.matchMedia("(max-width: 900px)"),a=window.matchMedia("(min-width: 900px) and (max-width: 1024px)"),s=window.matchMedia("(min-width: 1200px)"),o=()=>{i.matches?e():a.matches?t():s.matches&&n()};o();const r=()=>{o()};i.addEventListener("change",r),a.addEventListener("change",r),s.addEventListener("change",r)}};let L=new class{constructor(){this.gameId=null,this.userRating=null,this.isLiked=!1,this.isFavorite=!1,this._starsPopupBindingsApplied=!1,this.baseStats={viewCount:0,likeCount:0,ratingAvg:0,ratingCount:0}}async init(e){this.gameId=e,this.initializeBaseStatsFromStaticData();try{if(a)if("function"==typeof a.ensureInitialized){if(!await a.ensureInitialized())return}else"function"==typeof a.init&&await a.init();await this.loadUserDataFromIndexedDB()}catch(e){}await this.loadUserGameData()}async loadUserDataFromIndexedDB(){if(s&&s.isLogin()&&a&&this.gameId)try{const e=await a.getUserGameData(this.gameId);this.userRating=e.rating,this.isLiked=e.isLiked,this.isFavorite=e.isFavorite,void 0!==h&&h&&h.updateRatingUI(),this.updateLikeUI(),u.createFavoriteMenuItem(this.isFavorite),"function"==typeof refreshFavoritesSection&&refreshFavoritesSection(),"function"==typeof refreshLikesSection&&refreshLikesSection(),"function"==typeof updateFavoriteBadge&&updateFavoriteBadge(this.isFavorite)}catch(e){"function"==typeof updateFavoriteBadge&&updateFavoriteBadge(!1)}}async loadUserGameData(){}initializeBaseStatsFromStaticData(){if(!Array.isArray(window.GAMES_DB_DATA)||!this.gameId)return;const e=window.GAMES_DB_DATA.find(e=>e&&e.id===this.gameId);e&&(this.baseStats={viewCount:Number(e.view_count)||0,likeCount:Number(e.like_count)||0,ratingAvg:Number(e.rating_avg)||0,ratingCount:Number(e.rating_count)||0})}async syncUserDataToIndexedDB(){if(a&&this.gameId)try{this.userRating?await a.setRating(this.gameId,this.userRating):await a.removeRating(this.gameId),this.isLiked?await a.addLike(this.gameId):await a.removeLike(this.gameId),this.isFavorite?await a.addFavorite(this.gameId,this.getFavoriteMetadata()):await a.removeFavorite(this.gameId)}catch(e){}}async setRating(e){if(!s||!s.isLogin())return alert("Î°úÍ∑∏Ïù∏Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§."),!1;if(!this.gameId)return!1;const t=this.userRating;this.userRating=e,a&&await a.setRating(this.gameId,e),void 0!==h&&h&&h.updateRatingUI();try{const i=await n(`${API_BASE_URL}/api/games/${this.gameId}/rating`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({rating:e})});if(i.ok){const e=await i.json();if(e.success)return e.game&&a&&await a.updateGames([e.game]),!0;this.userRating=t,a&&(t?await a.setRating(this.gameId,t):await a.removeRating(this.gameId)),void 0!==h&&h&&h.updateRatingUI()}else this.userRating=t,a&&(t?await a.setRating(this.gameId,t):await a.removeRating(this.gameId)),void 0!==h&&h&&h.updateRatingUI();return!1}catch(e){return this.userRating=t,a&&(t?await a.setRating(this.gameId,t):await a.removeRating(this.gameId)),void 0!==h&&h&&h.updateRatingUI(),!1}}async toggleLike(){if(!s||!s.isLogin())return alert("Î°úÍ∑∏Ïù∏Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§."),!1;if(!this.gameId)return!1;const e=this.isLiked;if(this.isLiked=!this.isLiked,a)if(this.isLiked){const e=this.getLikeMetadata();await a.addLike(this.gameId,e)}else await a.removeLike(this.gameId);this.updateLikeUI(),"function"==typeof refreshLikesSection&&refreshLikesSection();try{const t=await n(`${API_BASE_URL}/api/games/${this.gameId}/like`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({action:e?"remove":"add"})});if(t.ok){const n=await t.json();if(n.success)return n.game&&a&&await a.updateGames([n.game]),!0;this.isLiked=e,a&&(e?await a.addLike(this.gameId):await a.removeLike(this.gameId)),this.updateLikeUI()}else this.isLiked=e,a&&(e?await a.addLike(this.gameId):await a.removeLike(this.gameId)),this.updateLikeUI();return!1}catch(t){return this.isLiked=e,a&&(e?await a.addLike(this.gameId):await a.removeLike(this.gameId)),this.updateLikeUI(),!1}}async toggleFavorite(e){if(!s||!s.isLogin())return alert("Î°úÍ∑∏Ïù∏Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§."),!1;if(!this.gameId)return!1;const t=this.isFavorite;this.isFavorite=e,a&&(e?await a.addFavorite(this.gameId,this.getFavoriteMetadata()):await a.removeFavorite(this.gameId)),"function"==typeof refreshFavoritesSection&&refreshFavoritesSection(),"function"==typeof updateFavoriteBadge&&updateFavoriteBadge(this.isFavorite),u.createFavoriteMenuItem(this.isFavorite);try{const i=await n(`${API_BASE_URL}/api/games/${this.gameId}/favorite`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({action:e?"add":"remove"})});if(i.ok){if((await i.json()).success)return!0;this.isFavorite=t,a&&(t?await a.addFavorite(this.gameId,this.getFavoriteMetadata()):await a.removeFavorite(this.gameId)),"function"==typeof refreshFavoritesSection&&refreshFavoritesSection(),"function"==typeof updateFavoriteBadge&&updateFavoriteBadge(this.isFavorite),u.createFavoriteMenuItem(this.isFavorite)}else this.isFavorite=t,a&&(t?await a.addFavorite(this.gameId,this.getFavoriteMetadata()):await a.removeFavorite(this.gameId)),"function"==typeof refreshFavoritesSection&&refreshFavoritesSection(),"function"==typeof updateFavoriteBadge&&updateFavoriteBadge(this.isFavorite),u.createFavoriteMenuItem(this.isFavorite);return!1}catch(e){return this.isFavorite=t,a&&(t?await a.addFavorite(this.gameId,this.getFavoriteMetadata()):await a.removeFavorite(this.gameId)),"function"==typeof refreshFavoritesSection&&refreshFavoritesSection(),"function"==typeof refreshLikesSection&&refreshLikesSection(),"function"==typeof updateFavoriteBadge&&updateFavoriteBadge(this.isFavorite),u.createFavoriteMenuItem(this.isFavorite),!1}}async incrementView(){if(!this.gameId)return!1;try{const e=await fetch(`${API_BASE_URL}/api/games/${this.gameId}/view`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(e.ok){if((await e.json()).success)return!0}return!1}catch(e){return!1}}updateLikeUI(){const e=document.getElementById("gameMetrics");if(!document.getElementById("playerContainer"))return;const t=this.baseStats.viewCount||0,n=(this.baseStats.likeCount||0)+(this.isLiked?1:0),i=document.getElementById("gameViews"),a=document.getElementById("gameViewsCount");a&&(a.textContent=k(t)),i&&i.setAttribute("title",`${t.toLocaleString("ko-KR")} plays`);const o=this.isLiked?"üíõ":"üñ§",r=`<span class="${this.isLiked?"metric-item liked":"metric-item"}" id="likeItem">${o} ${k(n)}</span>`;e&&(e.innerHTML=r);const c=document.getElementById("likeItem");c&&s&&s.isLogin()&&c.addEventListener("click",()=>{this.toggleLike()})}getFavoriteMetadata(){const e=document.getElementById("playerContainer"),t=e&&e.getAttribute("data-name")||"",n=e&&e.getAttribute("data-thumbnail")||null,i=window.location?window.location.pathname+window.location.search:null;return{name:t||this.gameId,thumbnail:n,url:i,created_at:(new Date).toISOString()}}getLikeMetadata(){const e=document.getElementById("playerContainer"),t=e&&e.getAttribute("data-name")||"",n=e&&e.getAttribute("data-thumbnail")||null,i=window.location?window.location.pathname+window.location.search:null,a=e&&e.getAttribute("data-category")||null;return{name:t||this.gameId,thumbnail:n,url:i,category:a,created_at:(new Date).toISOString()}}};function k(e){return e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e.toString()}function I(){const e=document.querySelector(".virtual-keyboard-wrapper"),t=document.getElementById("virtualKeyboard"),n=document.getElementById("keyboardLeft"),i=document.getElementById("keyboardRight"),a=document.getElementById("keyboardCloseBtn"),s=document.getElementById("keyboardToggleBtn");if(!(e&&t&&n&&i))return;const o=gameData&&gameData.leftKeys&&gameData.leftKeys.length>0,r=gameData&&gameData.rightKeys&&gameData.rightKeys.length>0;if(o||r){if(n.innerHTML="",i.innerHTML="",o&&function(e,t){let n=new Set,i=new Map,a=new Map,s=!1,o=null;const r=new Map,c=147,l=49;function d(n,i){const a=new Set,s=e.offsetWidth,o=Math.max(0,Math.min(n,s)),r=Math.max(0,Math.min(i,c)),d=Math.floor(o/l),m=Math.floor(r/l);return 0===m?0===d?(t.includes("ArrowLeft")&&a.add("ArrowLeft"),t.includes("ArrowUp")&&a.add("ArrowUp")):1===d?t.includes("ArrowUp")&&a.add("ArrowUp"):d>=2&&(t.includes("ArrowRight")&&a.add("ArrowRight"),t.includes("ArrowUp")&&a.add("ArrowUp")):1===m?0===d?t.includes("ArrowLeft")&&a.add("ArrowLeft"):1===d||d>=2&&t.includes("ArrowRight")&&a.add("ArrowRight"):2===m&&(0===d?(t.includes("ArrowLeft")&&a.add("ArrowLeft"),t.includes("ArrowDown")&&a.add("ArrowDown")):1===d?t.includes("ArrowDown")&&a.add("ArrowDown"):d>=2&&(t.includes("ArrowRight")&&a.add("ArrowRight"),t.includes("ArrowDown")&&a.add("ArrowDown"))),a}function m(e){const t=new Set([...n].filter(t=>!e.has(t))),s=new Set([...e].filter(e=>!n.has(e)));t.forEach(e=>{M(e);const t=r.get(e);t&&t.classList.remove("pressed"),a.has(e)&&(clearTimeout(a.get(e)),a.delete(e)),i.has(e)&&(clearInterval(i.get(e)),i.delete(e))}),s.forEach(e=>{C(e,!1);const t=r.get(e);t&&t.classList.add("pressed");const n=setTimeout(()=>{const t=setInterval(()=>{C(e,!0)},50);i.set(e,t)},500);a.set(e,n)}),n=e}function u(){n.forEach(e=>{M(e);const t=r.get(e);t&&t.classList.remove("pressed"),a.has(e)&&(clearTimeout(a.get(e)),a.delete(e)),i.has(e)&&(clearInterval(i.get(e)),i.delete(e))}),n.clear()}function h(t){const n=e.getBoundingClientRect();let i,a;if(t.touches&&t.touches.length>0){const e=null!==o?Array.from(t.touches).find(e=>e.identifier===o):t.touches[0];if(!e)return null;i=e.clientX-n.left,a=e.clientY-n.top}else i=t.clientX-n.left,a=t.clientY-n.top;return{x:i,y:a}}function g(t){if(t.preventDefault(),t.stopPropagation(),s)return;s=!0,t.touches&&t.touches.length>0&&(o=t.touches[0].identifier);const n=h(t);if(!n)return;m(d(n.x,n.y)),e.classList.add("active")}function p(e){if(!s)return;e.preventDefault(),e.stopPropagation();const t=h(e);if(!t)return;const i=d(t.x,t.y);(i.size!==n.size||[...i].some(e=>!n.has(e)))&&m(i)}function y(t){s&&(t.preventDefault(),t.stopPropagation(),s=!1,o=null,u(),e.classList.remove("active"))}t.forEach(t=>{const n=document.createElement("button");n.className="keyboard-key",n.textContent=A(t),n.dataset.key=t,n.style.pointerEvents="none","ArrowUp"===t?(n.style.left="49px",n.style.top="0"):"ArrowDown"===t?(n.style.left="49px",n.style.bottom="0",n.style.top="auto"):"ArrowLeft"===t?(n.style.left="0",n.style.top="50%",n.style.transform="translateY(-50%)"):"ArrowRight"===t&&(n.style.left="98px",n.style.top="50%",n.style.transform="translateY(-50%)"),e.appendChild(n),r.set(t,n)}),e.addEventListener("mousedown",g),e.addEventListener("mousemove",p),e.addEventListener("mouseup",y),e.addEventListener("mouseleave",y),e.addEventListener("touchstart",g,{passive:!1}),e.addEventListener("touchmove",p,{passive:!1}),e.addEventListener("touchend",y,{passive:!1}),e.addEventListener("touchcancel",y,{passive:!1}),e.style.touchAction="none"}(n,gameData.leftKeys),r&&gameData.rightKeys.forEach(e=>{const t=function(e){const t=document.createElement("button");t.className="keyboard-key",t.textContent=A(e),t.dataset.key=e;let n=null,i=!1,a=null;const s=s=>{s.preventDefault(),s.stopPropagation(),i||(i=!0,t.classList.add("pressed"),C(e,!1),a=setTimeout(()=>{n=setInterval(()=>{C(e,!0)},50)},500))},o=s=>{s.preventDefault(),s.stopPropagation(),i&&(i=!1,t.classList.remove("pressed"),a&&(clearTimeout(a),a=null),n&&(clearInterval(n),n=null),M(e))};return t.addEventListener("mousedown",s),t.addEventListener("mouseup",o),t.addEventListener("mouseleave",o),t.addEventListener("touchstart",s,{passive:!1}),t.addEventListener("touchend",o,{passive:!1}),t.addEventListener("touchcancel",o,{passive:!1}),t}(e);i.appendChild(t)}),a){a.replaceWith(a.cloneNode(!0));document.getElementById("keyboardCloseBtn").addEventListener("click",B)}e.classList.add("active"),s&&s.classList.remove("active")}}function B(){const e=document.querySelector(".virtual-keyboard-wrapper"),n=document.getElementById("keyboardToggleBtn");e&&e.classList.remove("active");const i=gameData&&(gameData.leftKeys&&gameData.leftKeys.length>0||gameData.rightKeys&&gameData.rightKeys.length>0);n&&void 0!==t&&t()&&i&&n.classList.add("active")}function A(e){return{ArrowUp:"‚Üë",ArrowDown:"‚Üì",ArrowLeft:"‚Üê",ArrowRight:"‚Üí",Enter:"Enter",Escape:"Esc",Space:"Space",Shift:"Shift",Control:"Ctrl",Alt:"Alt",Tab:"Tab",Backspace:"‚å´",Delete:"Del"}[e]||e}function C(e,t=!1){if(!S.isGameStarted)return;const n=S.gameFrame,i=E.getPlayer();if(i&&!t)try{i.focus()}catch(e){}else if(n&&!t)try{n.focus()}catch(e){}const a=x(e),s=new KeyboardEvent("keydown",{key:e,code:a,bubbles:!0,cancelable:!0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,repeat:t});if(window.dispatchEvent(s),n&&n.contentWindow&&n.contentDocument)try{const i=n.contentDocument,s=n.contentWindow,o=new KeyboardEvent("keydown",{key:e,code:a,bubbles:!0,cancelable:!0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,view:s,repeat:t});(i.body||i.documentElement||i).dispatchEvent(o)}catch(e){}}function M(e){if(!S.isGameStarted)return;const t=S.gameFrame,n=x(e),i=new KeyboardEvent("keyup",{key:e,code:n,bubbles:!0,cancelable:!0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1});if(window.dispatchEvent(i),t&&t.contentWindow&&t.contentDocument)try{const i=t.contentDocument,a=t.contentWindow,s=new KeyboardEvent("keyup",{key:e,code:n,bubbles:!0,cancelable:!0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,view:a});(i.body||i.documentElement||i).dispatchEvent(s)}catch(e){}}function x(e){return{ArrowUp:"ArrowUp",ArrowDown:"ArrowDown",ArrowLeft:"ArrowLeft",ArrowRight:"ArrowRight",Enter:"Enter",Escape:"Escape",Space:"Space",Shift:"ShiftLeft",Control:"ControlLeft",Alt:"AltLeft",Tab:"Tab",Backspace:"Backspace",Delete:"Delete"}[e]||e}!function(e){let t=!1;function n(e){const t=document.getElementById("favoriteBadge");t&&t.classList.toggle("hidden",!e)}function o(t){const n=t.url||"#",i=function(e,t){let n;return n=e&&"string"==typeof e?e:t||"Ïïå Ïàò ÏóÜÎäî Í≤åÏûÑ",n.length>15?n.substring(0,15)+"...":n}(t.name,t.game_id),a=function(t){if(!t)return null;try{return/^https?:\/\//i.test(t)||t.startsWith("data:")?t:new URL(t,e.location.origin+e.location.pathname).pathname}catch(e){return t}}(t.thumbnail);return`\n            <li class="left-toolbar-item">\n                <a href="${n}" class="game-item">\n                    ${a?`<img src="${a}" alt="${r(i)}" class="game-item-thumbnail" onerror="this.style.display='none';">`:""}\n                    <span class="game-item-title">${r(i)}</span>\n                </a>\n            </li>\n        `}function r(e){const t=document.createElement("div");return t.textContent=e||"",t.innerHTML}async function c(){if(t)return;t=!0;const e=document.getElementById("favoritesContent");if(!e)return void(t=!1);if(!s||"function"!=typeof s.isLogin||!s.isLogin())return e.innerHTML='<div class="empty-state">Î°úÍ∑∏Ïù∏ ÌõÑ ÏÇ¨Ïö© Í∞ÄÎä•Ìï©ÎãàÎã§</div>',e.classList.add("empty-state"),n(!1),void(t=!1);if(void 0===a||!a||"function"!=typeof a.ensureInitialized)return e.innerHTML='<div class="empty-state">Ï¶êÍ≤®Ï∞æÍ∏∞Î•º Î∂àÎü¨Ïò¨ Ïàò ÏóÜÏäµÎãàÎã§</div>',e.classList.add("empty-state"),n(!1),void(t=!1);if(!await a.ensureInitialized()||!i)return e.innerHTML='<div class="empty-state">Ï¶êÍ≤®Ï∞æÍ∏∞Î•º Î∂àÎü¨Ïò¨ Ïàò ÏóÜÏäµÎãàÎã§</div>',e.classList.add("empty-state"),n(!1),void(t=!1);try{const i=await a.getAllFavorites();if(!i||0===i.length)return e.innerHTML='<div class="empty-state">Ï¶êÍ≤®Ï∞æÍ∏∞Ìïú Í≤åÏûÑÏù¥ ÏóÜÏäµÎãàÎã§</div>',e.classList.add("empty-state"),n(!1),void(t=!1);i.sort((e,t)=>{const n=new Date(e.updated_at||e.created_at||0).getTime();return new Date(t.updated_at||t.created_at||0).getTime()-n});const s=i.slice(0,8),r=i.slice(8);let c='<ul class="left-toolbar-list">';s.forEach(e=>{c+=o(e)}),c+="</ul>",r.length>0&&(c+=`<button class="show-more-btn" onclick="showMoreFavorites(8)">Show More (${r.length})</button>`,c+='<div style="display:none;" id="remainingFavorites">',r.forEach(e=>{c+=o(e)}),c+="</div>"),e.innerHTML=c,e.classList.remove("empty-state"),function(e){const t=document.getElementById("playerContainer");if(!t)return;const i=t.getAttribute("data-game-id");if(!i)return;n(!!Array.isArray(e)&&e.some(e=>e&&e.game_id===i))}(i)}catch(t){e.innerHTML='<div class="empty-state">Ï¶êÍ≤®Ï∞æÍ∏∞Î•º Î∂àÎü¨Ïò§ÏßÄ Î™ªÌñàÏäµÎãàÎã§</div>',n(!1)}finally{t=!1}}function l(e=0){s&&"function"==typeof s.isLogin?c():e<20&&setTimeout(()=>l(e+1),200)}e.showMoreFavorites=function(e){const t=document.getElementById("remainingFavorites");if(t){const e=document.querySelector("#favoritesContent ul"),n=t.previousElementSibling;Array.from(t.children).forEach(t=>{e.appendChild(t)}),n.remove(),t.remove()}},e.refreshFavoritesSection=function(){l()},e.updateFavoriteBadge=n,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>l()):l()}(window),function(e){const t='<div class="empty-state">Ï¢ãÏïÑÏöîÌïú Í≤åÏûÑÏù¥ ÏóÜÏäµÎãàÎã§</div>';let n=!1;function o(t){const n=t.url||"#",i=function(e,t){let n;return n=e&&"string"==typeof e?e:t||"Ïïå Ïàò ÏóÜÎäî Í≤åÏûÑ",n.length>15?n.substring(0,15)+"...":n}(t.name,t.game_id),a=function(t){if(!t)return null;try{return/^https?:\/\//i.test(t)||t.startsWith("data:")?t:new URL(t,e.location.origin+e.location.pathname).pathname}catch(e){return t}}(t.thumbnail);return`\n            <li class="left-toolbar-item">\n                <a href="${n}" class="game-item">\n                    ${a?`<img src="${a}" alt="${r(i)}" class="game-item-thumbnail" onerror="this.style.display='none';">`:""}\n                    <span class="game-item-title">${r(i)}</span>\n                </a>\n            </li>\n        `}function r(e){const t=document.createElement("div");return t.textContent=e||"",t.innerHTML}async function c(){if(n)return;n=!0;const e=document.getElementById("likesContent");if(!e)return void(n=!1);if(!s||"function"!=typeof s.isLogin||!s.isLogin())return e.innerHTML='<div class="empty-state">Î°úÍ∑∏Ïù∏ ÌõÑ ÏÇ¨Ïö© Í∞ÄÎä•Ìï©ÎãàÎã§</div>',e.classList.add("empty-state"),void(n=!1);if(void 0===a||!a||"function"!=typeof a.ensureInitialized)return e.innerHTML='<div class="empty-state">Ï¢ãÏïÑÏöîÎ•º Î∂àÎü¨Ïò¨ Ïàò ÏóÜÏäµÎãàÎã§</div>',e.classList.add("empty-state"),void(n=!1);if(!await a.ensureInitialized()||!i)return e.innerHTML='<div class="empty-state">Ï¢ãÏïÑÏöîÎ•º Î∂àÎü¨Ïò¨ Ïàò ÏóÜÏäµÎãàÎã§</div>',e.classList.add("empty-state"),void(n=!1);try{const i=await a.getAllLikes();if(!i||0===i.length)return e.innerHTML=t,e.classList.add("empty-state"),void(n=!1);const s=document.querySelectorAll(".game-card"),r=new Map;s.forEach(e=>{const t=e.getAttribute("data-game-id");t&&r.set(t,{name:e.getAttribute("data-name")||t,thumbnail:e.querySelector(".game-thumbnail")?.getAttribute("src")||null,url:e.getAttribute("data-game-url")||null,category:e.getAttribute("data-category")||null})});const c=i.map(e=>{if(e.name&&e.url)return e;const t=r.get(e.game_id);return t?{...e,name:t.name||e.game_id,thumbnail:t.thumbnail||e.thumbnail||null,url:t.url||e.url||null,category:t.category||e.category||null}:{...e,name:e.name||e.game_id,thumbnail:e.thumbnail||null,url:e.url||null,category:e.category||null}}).filter(e=>e.name);if(0===c.length)return e.innerHTML=t,e.classList.add("empty-state"),void(n=!1);c.sort((e,t)=>{const n=new Date(e.updated_at||e.created_at||0).getTime();return new Date(t.updated_at||t.created_at||0).getTime()-n});const l=c.slice(0,8),d=c.slice(8);let m='<ul class="left-toolbar-list">';l.forEach(e=>{m+=o(e)}),m+="</ul>",d.length>0&&(m+=`<button class="show-more-btn" onclick="showMoreLikes(8)">Show More (${d.length})</button>`,m+='<div style="display:none;" id="remainingLikes">',d.forEach(e=>{m+=o(e)}),m+="</div>"),e.innerHTML=m,e.classList.remove("empty-state")}catch(t){e.innerHTML='<div class="empty-state">Ï¢ãÏïÑÏöîÎ•º Î∂àÎü¨Ïò§ÏßÄ Î™ªÌñàÏäµÎãàÎã§</div>',e.classList.add("empty-state")}finally{n=!1}}function l(e=0){s&&"function"==typeof s.isLogin?c():e<20&&setTimeout(()=>l(e+1),200)}e.showMoreLikes=function(e){const t=document.getElementById("remainingLikes");if(t){const e=document.querySelector("#likesContent ul"),n=t.previousElementSibling;Array.from(t.children).forEach(t=>{e.appendChild(t)}),n.remove(),t.remove()}},e.refreshLikesSection=function(){l()},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>l()):l()}(window),function(e){const t=200;let i=[],o=null,r=!1,d=null;function m(){return void 0!==s&&s&&"function"==typeof s.isLogin&&s.isLogin()}function u(){const e=document.getElementById("playerContainer");return e?e.getAttribute("data-game-id"):null}function h(){const e=document.getElementById("commentInput"),t=document.getElementById("commentSubmit"),n=document.getElementById("commentLoginNotice"),i=document.getElementById("commentFormWrapper"),a=document.getElementById("commentCancelEdit"),s=m(),o=s&&w(),c=r;e&&(e.disabled=!s||!c&&o),t&&(t.disabled=!s||!c&&o,t.textContent=c?"ÎåìÍ∏Ä ÏàòÏ†ï":"ÎåìÍ∏Ä Îì±Î°ù"),n&&n.classList.toggle("hidden",s),i&&i.classList.toggle("hidden",s&&o&&!c),a&&(a.classList.toggle("hidden",!c),a.disabled=!c),o&&!c||g()}function g(){const e=document.getElementById("commentInput"),t=document.getElementById("commentCharCount");if(e&&t){const n=e.value.length||0;t.textContent=`${n} / 200`}}async function p(e){if(e.preventDefault(),!m())return alert("Î°úÍ∑∏Ïù∏Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§."),void h();const t=r,i=d;if(w()&&!t)return;if(t&&!Number.isFinite(i))return void I();const a=document.getElementById("commentInput"),c=document.getElementById("commentSubmit"),l=a?a.value.trim():"";if(!l)return void alert("ÎåìÍ∏ÄÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.");if(l.length>200)return void alert("ÎåìÍ∏ÄÏùÄ ÏµúÎåÄ 200ÏûêÍπåÏßÄ ÏûÖÎ†•Ìï† Ïàò ÏûàÏäµÎãàÎã§.");const p=o?{...o}:null,y=f(),v=s&&"function"==typeof s.get?s.get():null,b={idx:i||Date.now(),user_idx:y,content:l,nickname:v&&(v.nickname||v.name)||"ÎÇò",picture:v&&v.picture||null,created_at:(new Date).toISOString()};o=b,await C(b),await A(),a&&(a.value=""),g(),t&&I({resetInput:!1}),h(),c&&(c.disabled=!m()),a&&(a.disabled=!m());try{const e=await async function(e){const t=u();if(!t)throw new Error("Í≤åÏûÑ Ï†ïÎ≥¥Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.");if("undefined"==typeof API_BASE_URL)throw new Error("API Ï£ºÏÜåÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.");const i="undefined"!=typeof CURRENT_LANG&&CURRENT_LANG?CURRENT_LANG:"en",a=await n(`${API_BASE_URL}/api/games/${encodeURIComponent(t)}/comments`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({content:e,lang:i})}),s=await a.json();if(!s.success)throw new Error(s.message||"ÎåìÍ∏Ä Îì±Î°ùÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.");return s.comment}(l);e&&(o={...e,nickname:e.nickname||v&&(v.nickname||v.name)||"ÎÇò",picture:e.picture||v&&v.picture||null},await C(o),await A())}catch(e){o=p,p?await C(p):(await M(),o=null),await A(),alert(e&&e.message?e.message:"ÎåìÍ∏Ä Îì±Î°ùÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.")}}function y(e){i=Array.isArray(e)?e.slice(0,t):[],function(e){const n=document.getElementById("commentsContainer"),i=document.getElementById("commentsEmptyState");if(!n)return;if(!e||0===e.length)return n.innerHTML="",i&&i.classList.remove("hidden"),void h();i&&i.classList.add("hidden");const a=Array.isArray(e)?e.slice(0,t):[],s=a.map(e=>{const t=e.nickname||"ÏùµÎ™Ö",n=e.picture||"data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22%3E%3Ccircle cx=%2212%22 cy=%2212%22 r=%2210%22 fill=%22%23ccc%22/%3E%3C/svg%3E",i=F(e.content||""),a=e.created_at?x(e.created_at):"";return`\n                <div class="comment-item">\n                    <div class="comment-body">\n                        <img src="${n}" alt="${F(t)}" class="comment-avatar" onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22%3E%3Ccircle cx=%2212%22 cy=%2212%22 r=%2210%22 fill=%22%23ccc%22/%3E%3C/svg%3E'">\n                        <div class="comment-nickname">\n                            <span>${F(t)}</span>\n                            <span class="comment-date">${a||""}</span>\n                        </div>\n                        <div class="comment-content">${i}</div>\n                        <button class="comment-options" type="button" title="ÏòµÏÖò" aria-haspopup="menu" data-comment-id="${Number(e.idx)||""}" data-user-idx="${Number(e.user_idx)||""}">‚ãÆ</button>\n                    </div>\n                </div>\n            `}).join("");n.innerHTML=s,h()}(i),h()}function f(){if(void 0===s||!s||"function"!=typeof s.get)return null;const e=s.get();return e&&void 0!==e.idx&&null!==e.idx?Number(e.idx):null}function w(){return!!o}function v(){void 0!==l&&l||(l=new c),l.setHandlers({onReport:E,onRemove:S,onEdit:L})}function b(e){if(!Array.isArray(e)||0===e.length)return;v();document.querySelectorAll(".comment-options").forEach(e=>{e.onclick=t=>{t.preventDefault(),t.stopPropagation();const n=Number(e.getAttribute("data-comment-id"));if(!Number.isFinite(n)||n<=0)return;const i=Number(e.getAttribute("data-user-idx")),a=f(),s=!(!Number.isFinite(i)||!Number.isFinite(a))&&i===a,o=s;l&&l.showForComment({commentId:n,canRemove:s,canEdit:o},e)}})}async function E(e){try{const t=u(),i=t?`gameID: ${t}`:"";await async function(e,t=""){const i=u();if(!i)throw new Error("Í≤åÏûÑ Ï†ïÎ≥¥Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.");if("undefined"==typeof API_BASE_URL)throw new Error("API Ï£ºÏÜåÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.");const a=await n(`${API_BASE_URL}/api/games/${encodeURIComponent(i)}/comments/${encodeURIComponent(e)}/report`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({reason:t})}),s=await a.json();if(!a.ok||!s.success)throw new Error(s&&s.message||"ÎåìÍ∏Ä Ïã†Í≥†Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.");return s}(e,i),alert("Ïã†Í≥†Í∞Ä Ï†ëÏàòÎêòÏóàÏäµÎãàÎã§.")}catch(e){alert(e&&e.message?e.message:"Ïã†Í≥† Ï≤òÎ¶¨Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.")}}async function S(e){if(!confirm("Ïù¥ ÎåìÍ∏ÄÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?"))return;const t=o?{...o}:null;await M(),o=null,await A();try{await async function(e){const t=u();if(!t)throw new Error("Í≤åÏûÑ Ï†ïÎ≥¥Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.");if("undefined"==typeof API_BASE_URL)throw new Error("API Ï£ºÏÜåÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.");const i=await n(`${API_BASE_URL}/api/games/${encodeURIComponent(t)}/comments/${encodeURIComponent(e)}`,{method:"DELETE",credentials:"include"}),a=await i.json();if(!i.ok||!a.success)throw new Error(a&&a.message||"ÎåìÍ∏Ä ÏÇ≠Ï†úÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.");return a}(e)}catch(e){o=t,t&&await C(t),await A(),alert(e&&e.message?e.message:"ÎåìÍ∏Ä ÏÇ≠Ï†úÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.")}}function L(e){if(!m())return void alert("Î°úÍ∑∏Ïù∏Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§.");const t=Number(e);if(!Number.isFinite(t)||t<=0)return;let n=null;if(o&&Number(o.idx)===t&&(n=o),!n&&Array.isArray(i)&&(n=i.find(e=>Number(e.idx)===t)),!n)return void alert("ÏàòÏ†ïÌï† ÎåìÍ∏ÄÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.");const a=f();if(a&&Number(n.user_idx)!==a)return void alert("Î≥∏Ïù∏ ÎåìÍ∏ÄÎßå ÏàòÏ†ïÌï† Ïàò ÏûàÏäµÎãàÎã§.");const s=document.getElementById("commentInput"),c=document.getElementById("commentFormWrapper");if(r=!0,d=t,s){s.disabled=!1,s.value=n.content||"",s.focus();const e=s.value.length;"function"==typeof s.setSelectionRange&&s.setSelectionRange(e,e)}c&&c.classList.remove("hidden"),h(),g(),B()}function k(e){e&&e.preventDefault(),I()}function I({resetInput:e=!0}={}){r=!1,d=null;const t=document.getElementById("commentInput");t&&(e&&(t.value=""),t.blur()),h(),g(),B(),o&&b([o])}function B(){const e=document.getElementById("myCommentSection"),t=document.getElementById("myCommentContainer");if(!e||!t)return;if(!o||r)return e.classList.add("hidden"),void(t.innerHTML="");const n=o,i=n.nickname||"ÎÇò",a=n.picture||s&&s.get().picture||"data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22%3E%3Ccircle cx=%2212%22 cy=%2212%22 r=%2210%22 fill=%22%23ccc%22/%3E%3C/svg%3E",c=F(n.content||""),l=n.created_at?x(n.created_at):"",d=Number(n.idx)||"",m=Number(n.user_idx)||f()||"";e.classList.remove("hidden"),t.innerHTML=`\n            <div class="comment-item">\n                <div class="comment-body">\n                    <img src="${a}" alt="${F(i)}" class="comment-avatar" onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22%3E%3Ccircle cx=%2212%22 cy=%2212%22 r=%2210%22 fill=%22%23ccc%22/%3E%3C/svg%3E'">\n                    <div class="comment-nickname">\n                        <span>${F(i)}</span>\n                        <span class="comment-date">${l||""}</span>\n                    </div>\n                    <div class="comment-content">${c}</div>\n                    <button class="comment-options" type="button" title="ÏòµÏÖò" aria-haspopup="menu" data-comment-id="${d}" data-user-idx="${m}">‚ãÆ</button>\n                </div>\n            </div>\n        `}async function A(){const n=Array.isArray(e.GAME_COMMENTS)?e.GAME_COMMENTS.slice(0,t):[],s=f();let r=null;if(s){const e=u();if(void 0!==a&&a&&"function"==typeof a.getUserComment&&e)try{r=await a.getUserComment(e)}catch(e){}}o=s&&r&&Number(r.user_idx)===s?r:null;let c=n;s&&(c=c.filter(e=>Number(e.user_idx)!==s)),y(c.slice(0,t)),B();b(o?[o,...i]:i)}async function C(e){const t=u();if(!t||!e)return;if(void 0===a||!a||"function"!=typeof a.setUserComment)return;const n=f(),i=s&&"function"==typeof s.get?s.get():null,o={...e,user_idx:e.user_idx??n??null,nickname:e.nickname||i&&(i.nickname||i.name)||"ÎÇò",picture:e.picture||i&&i.picture||null,created_at:e.created_at||(new Date).toISOString()};try{await a.setUserComment(t,o)}catch(e){}}async function M(){const e=u();if(e&&void 0!==a&&a&&"function"==typeof a.removeUserComment)try{await a.removeUserComment(e)}catch(e){}}function x(e){if(!e)return"";try{const t=new Date(e),n=new Date-t,i=Math.floor(n/1e3),a=Math.floor(i/60),s=Math.floor(a/60),o=Math.floor(s/24);return i<60?"Î∞©Í∏à Ï†Ñ":a<60?`${a}Î∂Ñ Ï†Ñ`:s<24?`${s}ÏãúÍ∞Ñ Ï†Ñ`:o<7?`${o}Ïùº Ï†Ñ`:t.toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"})}catch(t){return e}}function F(e){if(!e)return"";const t=document.createElement("div");return t.textContent=e,t.innerHTML}e.initializeCommentsSection=function(){document.getElementById("commentsContainer")&&(v(),function(){const e=document.getElementById("commentForm"),t=document.getElementById("commentInput"),n=document.getElementById("commentCancelEdit");t&&t.addEventListener("input",g);e&&e.addEventListener("submit",p);n&&n.addEventListener("click",k)}(),h(),g(),function(){const t=document.getElementById("commentsContainer");if(!t)return;let n=0;const i=10;function a(){void 0!==e.GAME_COMMENTS?A().catch(e=>{y([]),B()}):n<i?(n+=1,setTimeout(a,100)):A().catch(e=>{y([]),B()})}a()}())}}(window),document.addEventListener("DOMContentLoaded",function(){S.createPlayerContainer();const e=document.getElementById("playerContainer");if(e){const t=e.getAttribute("data-game-id");L.init(t)}!function(){const e=document.getElementById("playerContainer");if(e&&window.GAMES_DB_DATA){const t=e.getAttribute("data-game-id"),n=window.GAMES_DB_DATA.find(e=>e.id===t);if(n){const e=document.getElementById("gameViews"),t=document.getElementById("gameViewsCount");if(e&&t){const i=L&&L.baseStats?L.baseStats.viewCount:n.view_count||0,a=Number(i)||0;t.textContent=k(a),e.setAttribute("title",`${a.toLocaleString("ko-KR")} plays`)}}}L&&(void 0!==h&&h&&h.updateRatingUI(),L.updateLikeUI())}(),async function(){if(!Array.isArray(window.GAMES_DB_DATA))return;let e=null;if(void 0!==a&&a&&"function"==typeof a.loadUserInteractions)try{e=await a.loadUserInteractions()}catch(e){}const t=e?.likedGameIds,n=e?.ratingsMap;document.querySelectorAll(".recommendation-card").forEach(e=>{const i=e.getAttribute("data-game-id");if(!i)return;const a=window.GAMES_DB_DATA.find(e=>e&&e.id===i);if(!a)return;const s=e.querySelector(".recommendation-metric.rating"),o=(e.querySelector(".recommendation-metric.views"),e.querySelector(".recommendation-metric.likes"),e.querySelector(".recommendation-metrics")),r=Number(a.rating_avg)||0,c=Number(a.rating_count)||0,l=Number(a.view_count)||0;let d=Number(a.like_count)||0;t instanceof Set&&t.has(i)&&(d+=1);const m=n instanceof Map?n.get(i):null;let u=r,h=c;if(m&&"number"==typeof m&&m>=1&&m<=5)if(c>0){h=c+1,u=(r*c+m)/h}else u=m,h=1;if(s){b.renderStars(s,u);let e=s.querySelector(".rating-count");h>0?(e||(e=document.createElement("span"),e.className="rating-count",e.style.color="#666",e.style.fontSize="0.85rem",e.style.marginLeft="6px",s.appendChild(e)),e.textContent=`(${k(h)})`):e&&e.remove()}if(o){let e="";l>0&&(e+=`<span class="recommendation-metric views" data-role="views" title="${l.toLocaleString("ko-KR")} plays">üé¨ ${k(l)}</span>`),d>0&&(e+=`<span class="recommendation-metric likes" data-role="likes">üíõ ${k(d)}</span>`),o.innerHTML=e}})}();const t=document.getElementById("gameMenuButton");if(t&&u){if(document.getElementById("playerContainer")){const e=L.isFavorite||!1;u.createFavoriteMenuItem(e),u.attachButton(t)}}S.gameWidth>=900&&!S.isMobileSize()||S.setViewMode("normal"),S.browserResized(function(){const e=document.querySelector(".game-info");e&&"none"===e.style.display&&S.setViewMode("normal");const t=document.getElementById("normalBtn");t&&(t.style.display="none")},function(){const e=document.querySelector(".game-info");e&&"none"===e.style.display&&S.setViewMode("normal");const t=document.getElementById("normalBtn");t&&(t.style.display="none")},function(){const e=document.getElementById("normalBtn");e&&(e.style.display="flex")});const n="{{category}}";if(n){const e=document.querySelector(`a[href="/index.html?cat=${n}"]`);e&&e.classList.add("active")}!function(){const e=document.getElementById("playerContainer");if(!e)return;const t={name:e.getAttribute("data-name"),thumbnail:e.getAttribute("data-thumbnail"),url:window.location.href,category:e.getAttribute("data-category")||"",timestamp:Date.now()},n=JSON.parse(localStorage.getItem("recentlyVisited")||"[]"),i=n.findIndex(e=>e.url===t.url);-1!==i&&n.splice(i,1),n.unshift(t),n.length>30&&n.splice(30),localStorage.setItem("recentlyVisited",JSON.stringify(n))}(),function(){const e=document.getElementById("keyboardToggleBtn"),t=document.getElementById("virtualKeyboard");if(!e||!t)return;e.addEventListener("click",function(){t.classList.contains("active")?B():I()})}(),function(){const e=document.querySelectorAll(".game-info-tab"),t=document.querySelectorAll(".game-info-tab-content");e.forEach(n=>{n.addEventListener("click",function(){const n=this.getAttribute("data-tab");e.forEach(e=>e.classList.remove("active")),t.forEach(e=>e.classList.remove("active")),this.classList.add("active");const i=document.getElementById(`tab${n.charAt(0).toUpperCase()+n.slice(1)}`);i&&i.classList.add("active")})})}(),initializeCommentsSection();document.querySelectorAll(".header, .playerContainer").forEach((e,t)=>{e.style.opacity="0",e.style.transform="translateY(30px)",setTimeout(()=>{e.style.transition="opacity 0.5s ease, transform 0.5s ease",e.style.opacity="1",e.style.transform="translateY(0)"},200*t)})}),function(){function e(){const e=document.getElementById("languageSelect");e&&m(e)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e,{once:!0}):e();const t="flit_search_history";function n(){try{const e=localStorage.getItem(t);return e?JSON.parse(e):[]}catch(e){return[]}}function i(e){try{localStorage.setItem(t,JSON.stringify(e))}catch(e){}}function a(e){if(!e||""===e.trim())return;let t=n();const a=e.trim();t=t.filter(e=>e.toLowerCase()!==a.toLowerCase()),t.unshift(a),t.length>30&&(t=t.slice(0,30)),i(t),s()}function s(){const e=document.getElementById("searchHistoryList"),t=n();0!==t.length?(e.innerHTML=t.map((e,t)=>`\n            <li class="search-history-item" data-index="${t}">\n                <span class="search-history-text">${function(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}(e)}</span>\n                <button class="search-history-delete" data-index="${t}" aria-label="ÏÇ≠Ï†ú">\n                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="16" height="16">\n                        <line x1="18" y1="6" x2="6" y2="18"></line>\n                        <line x1="6" y1="6" x2="18" y2="18"></line>\n                    </svg>\n                </button>\n            </li>\n        `).join(""),document.querySelectorAll(".search-history-item").forEach(e=>{e.querySelector(".search-history-text").addEventListener("click",function(){o(t[parseInt(e.dataset.index)])})}),document.querySelectorAll(".search-history-delete").forEach(e=>{e.addEventListener("click",function(e){e.stopPropagation();!function(e){let t=n();t.splice(e,1),i(t),s()}(parseInt(this.dataset.index))})})):e.innerHTML='<li class="search-history-empty">Í≤ÄÏÉâ Í∏∞Î°ùÏù¥ ÏóÜÏäµÎãàÎã§</li>'}function o(e){const t=document.getElementById("searchBox");t&&(t.value=e,"function"==typeof filterGamesBySearch&&filterGamesBySearch(e));const n=document.getElementById("searchModalInput");n&&(n.value=e),a(e),"function"==typeof filterGamesBySearch&&filterGamesBySearch(e),h()}const r=document.getElementById("searchIconButton"),c=document.getElementById("searchModal"),l=document.getElementById("searchModalClose"),d=document.getElementById("searchModalInput"),u=document.getElementById("searchHistoryClear");function h(){if(c&&r){c.classList.remove("active"),r.style.position="",r.style.top="",r.style.right="";const e=document.querySelector(".search-modal-header");e&&(e.style.paddingTop=""),document.body.classList.remove("modal-open")}}r&&r.addEventListener("click",function(){c&&c.classList.contains("active")?h():function(){if(c&&r){document.body.classList.add("modal-open");const e=r.getBoundingClientRect(),t=e.top,n=window.innerWidth-e.right,i=t+e.height/2;r.style.position="fixed",r.style.top=t+"px",r.style.right=n+"px",r.style.zIndex="2001",c.classList.add("active");const a=document.querySelector(".search-modal-header"),o=document.getElementById("searchModalInput");if(a&&o){const e=o.offsetHeight||40;a.style.paddingTop=i-e/2+"px"}d&&d.focus(),s()}}()}),l&&l.addEventListener("click",h),d&&d.addEventListener("keypress",function(e){if("Enter"===e.key){o(this.value)}}),u&&u.addEventListener("click",function(){confirm("Í≤ÄÏÉâ Í∏∞Î°ùÏùÑ Î™®Îëê ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?")&&(i([]),s())}),c&&c.addEventListener("click",function(e){e.target===c&&h()});const g=document.getElementById("searchBox");g&&g.addEventListener("keypress",function(e){if("Enter"===e.key){const e=this.value;a(e),"function"==typeof filterGamesBySearch&&filterGamesBySearch(e)}})}(),document.addEventListener("DOMContentLoaded",function(){if(void 0!==s&&s.isLogin()){const e=s.get(),t=document.getElementById("google-login-button"),n=document.querySelector(".user-menu"),i=document.getElementById("userAvatar"),a=document.getElementById("userName"),o=document.getElementById("userEmail");t&&(t.style.display="none"),n&&(n.style.display="flex",n.classList.add("show")),i&&e.picture&&(i.src=e.picture,i.alt=e.nickname||e.name||"User"),a&&(a.textContent=e.nickname||e.name||"User"),o&&(o.textContent=e.email||"")}}),function(){const e=document.getElementById("listModal"),t=document.getElementById("listModalTitle"),n=document.getElementById("listModalContent"),i=document.getElementById("listModalClose");function a(i){const a=document.getElementById("leftToolbar");if(window.innerWidth<=900&&e&&n&&t){let a="",s="";switch(i){case"categories":a="üéÆ Categories";const e=document.querySelector(".left-toolbar-section:first-of-type");if(e){const t=e.querySelector(".left-toolbar-list");s=t?t.outerHTML:'<div class="empty-state">Ïπ¥ÌÖåÍ≥†Î¶¨Î•º Î∂àÎü¨Ïò¨ Ïàò ÏóÜÏäµÎãàÎã§</div>'}else s='<div class="empty-state">Ïπ¥ÌÖåÍ≥†Î¶¨Î•º Î∂àÎü¨Ïò¨ Ïàò ÏóÜÏäµÎãàÎã§</div>';break;case"favorites":a="üéØ Favorites";const t=document.querySelector("#favoritesContent");s=t&&t.innerHTML.trim()&&!t.classList.contains("empty-state")?t.innerHTML:'<div class="empty-state">Ï¶êÍ≤®Ï∞æÍ∏∞Ìïú Í≤åÏûÑÏù¥ ÏóÜÏäµÎãàÎã§</div>';break;case"recent":a="üïπÔ∏è Recent";const n=document.querySelector("#recentlyVisitedContent");s=n&&n.innerHTML.trim()?n.innerHTML:'<div class="empty-state">ÏµúÍ∑º Î∞©Î¨∏Ìïú Í≤åÏûÑÏù¥ ÏóÜÏäµÎãàÎã§</div>';break;case"likes":a="üíõ Likes";const i=document.querySelector("#likesContent");s=i&&i.innerHTML.trim()&&!i.classList.contains("empty-state")?i.innerHTML:'<div class="empty-state">Ï¢ãÏïÑÏöîÌïú Í≤åÏûÑÏù¥ ÏóÜÏäµÎãàÎã§</div>'}t.textContent=a,n.innerHTML=s;const o=n.querySelector(".show-more-btn");if(o){const e=o.getAttribute("onclick");if(e){const t=e.match(/(\w+)\(/);if(t){const e=t[1];o.onclick=function(){"function"==typeof window[e]&&(window[e](),setTimeout(()=>{const e=document.querySelector("#"+("favorites"===i?"favoritesContent":"likes"===i?"likesContent":"recentlyVisitedContent"));if(e){n.innerHTML=e.innerHTML;const t=n.querySelector(".show-more-btn");if(t){const e=t.getAttribute("onclick");if(e){e.match(/(\w+)\(/)&&(t.onclick=arguments.callee)}}}},100))}}}}document.body.classList.add("modal-open"),e.classList.add("active")}else if(a){let e=null;switch(i){case"categories":e=a.querySelector(".left-toolbar-section:first-of-type");break;case"favorites":e=a.querySelector("#favoritesContent")?.closest(".left-toolbar-section");break;case"recent":e=a.querySelector("#recentlyVisitedContent")?.closest(".left-toolbar-section");break;case"likes":e=a.querySelector("#likesContent")?.closest(".left-toolbar-section")}e&&e.scrollIntoView({behavior:"smooth",block:"start"})}document.querySelectorAll(".bottom-toolbar-item").forEach(e=>e.classList.remove("active"));const s=document.getElementById({categories:"bottomCategories",favorites:"bottomFavorites",recent:"bottomRecentlyVisited",likes:"bottomLikes"}[i]);s&&s.classList.add("active")}i&&i.addEventListener("click",function(){e&&(e.classList.remove("active"),document.body.classList.remove("modal-open"))}),e&&e.addEventListener("click",function(t){t.target===e&&(e.classList.remove("active"),document.body.classList.remove("modal-open"))});const s=document.getElementById("bottomCategories");s&&s.addEventListener("click",function(){a("categories")});const o=document.getElementById("bottomFavorites");o&&o.addEventListener("click",function(){a("favorites")});const r=document.getElementById("bottomRecentlyVisited");r&&r.addEventListener("click",function(){a("recent")});const c=document.getElementById("bottomLikes");c&&c.addEventListener("click",function(){a("likes")});const l=window.location.pathname,d=document.getElementById("bottomHome");(l.includes("index.html")||l.includes("index")||"/"===l||l.endsWith("/"))&&d&&d.classList.add("active")}()})();</script></body></html>